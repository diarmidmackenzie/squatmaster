{"version":3,"file":"squatmaster.min.js","mappings":"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","sources":["webpack://squatmaster/webpack/universalModuleDefinition","webpack://squatmaster/./src/bar-monitor.js","webpack://squatmaster/./src/bar-position.js","webpack://squatmaster/./src/in-rack-ui.js","webpack://squatmaster/./src/nod-shake.js","webpack://squatmaster/./src/squat-rack.js","webpack://squatmaster/./src/ui-updater.js","webpack://squatmaster/./src/vertical-controls.js","webpack://squatmaster/webpack/bootstrap","webpack://squatmaster/./index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","// component set on scene.\r\n// Contains configuration of key bar thresholds.\r\n// Monitors bar position and generates events when thresholds are hit.\r\nAFRAME.registerComponent('bar-monitor', {\r\n\r\n  dependencies: ['bar-position'],\r\n\r\n  schema: {\r\n    // Position of bar when on hooks (before the lift begins)\r\n    // Co-ordinates in rack space.\r\n    hookPosition : {type: 'vec3', default: {x: 0, y: 1.5, z: -0.5}},\r\n\r\n    // height of bar when lifter is standing up straight.\r\n    topHeight : {default: 1.7},\r\n\r\n    // target depth for bar, to achieve parallel thighs.\r\n    targetDepth: {default: 0.6},\r\n\r\n    // height of the bar when it hits the safety pins.\r\n    safetyPinHeight: {default: 0.5},\r\n\r\n    // width of rack in meters\r\n    rackWidth: {default: 1},\r\n\r\n    // depth (z-direction) of rack in meters\r\n    rackDepth: {default: 1}\r\n  },\r\n\r\n  init() {\r\n\r\n    this.state = {\r\n      insideRack : false,\r\n      lifterAtHooks : false,\r\n      barOnShoulders : false,\r\n      atTop : false,\r\n      belowDepth : false,\r\n      belowSafetyPins : false,\r\n    }\r\n  },\r\n\r\n  isInsideRack(barPosition) {\r\n\r\n    let insideLR, insideFB\r\n\r\n    if (Math.abs(barPosition.x - this.data.hookPosition.x) < this.data.rackWidth / 2) {\r\n      insideLR = true\r\n    }\r\n\r\n    // zOffset relative to hook Position will be positive (up to rack depth)\r\n    // or very small negative (to 10cm tolerance) when inside the rack.\r\n    const zOffset = barPosition.z - this.data.hookPosition.z\r\n    if ((zOffset) < this.data.rackDepth && \r\n        (zOffset) > -0.1) {\r\n      insideFB = true\r\n    }\r\n\r\n    return (insideLR && insideFB)\r\n\r\n  },\r\n\r\n  checkIfInsideRack(barPosition) {\r\n    if (this.isInsideRack(barPosition)) {\r\n\r\n      if (!this.state.insideRack) {\r\n        this.el.emit('entered-rack')\r\n      }\r\n\r\n      this.state.insideRack = true\r\n    }\r\n    else {\r\n      if (this.state.insideRack) {\r\n        this.el.emit('exited-rack')\r\n      }\r\n\r\n      this.state.insideRack = false\r\n    }\r\n\r\n    return this.state.insideRack\r\n  },\r\n\r\n  isAtHooks(barPosition) {\r\n\r\n    let atHooksLR, atHooksFB\r\n\r\n    // for L-R, anywhere in rack will do.\r\n    if (Math.abs(barPosition.x - this.data.hookPosition.x) < this.data.rackWidth / 2) {\r\n      atHooksLR = true\r\n    }\r\n\r\n    // 10cm tolerance for Front-Back.\r\n\r\n    // Note: user can subvert logic by bringing in bar very close to pins, then lowering directly in front of pins.\r\n    // App will assume bar has been returned to rack, when in fact it's still on users' shoulders.\r\n    // This behaviour seems really unlikely to happen, unless user is deliberatly trying to subvert the app...\r\n\r\n    // Not sure we can do any better without introducing risk of false negatives when bar\r\n    // is legitimately returned to the hooks.\r\n    if (Math.abs(this.data.hookPosition.z - barPosition.z) < 0.05) {\r\n      atHooksFB = true\r\n    }\r\n\r\n    return atHooksLR && atHooksFB\r\n  },\r\n\r\n  checkIfAtHooks(barPosition) {\r\n\r\n    if (this.isAtHooks(barPosition)) {\r\n      if (!this.state.lifterAtHooks) {\r\n        this.el.emit('reached-hooks')\r\n      }\r\n      this.state.lifterAtHooks = true\r\n    }\r\n    else {\r\n      if (this.state.lifterAtHooks) {\r\n        // lifter leaving hooks.\r\n        // may or may not have bar on shoulders.  Determine based on y position.\r\n\r\n        if (barPosition.y > this.data.hookPosition.y) {\r\n          // bar above hooks - must be on shoulders.\r\n\r\n          if (!this.state.barOnShoulders) {\r\n\r\n            this.el.emit('shouldered-bar')\r\n          }\r\n          \r\n          this.state.barOnShoulders = true\r\n        }\r\n        else {\r\n          // bar below hooks - must have deposited it back on the hooks.\r\n\r\n          if (this.state.barOnShoulders) {\r\n\r\n            this.el.emit('returned-bar')\r\n          }\r\n          \r\n          this.state.barOnShoulders = false\r\n        }\r\n\r\n        this.el.emit('left-hooks')\r\n      }\r\n      this.state.lifterAtHooks = false\r\n    }\r\n\r\n    return this.state.lifterAtHooks\r\n  },\r\n\r\n  isAtTop(barPosition) {\r\n\r\n    // 5cm tolerance.  Anything over top is considered at top.\r\n    if (this.data.topHeight - barPosition.y < 0.05) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  },\r\n\r\n  checkIfAtTop(barPosition) {\r\n    if (this.isAtTop(barPosition)) {\r\n\r\n      if (!this.state.atTop) {\r\n        this.el.emit('hit-top')\r\n      }\r\n\r\n      this.state.atTop = true\r\n    }\r\n    else {\r\n      if (this.state.atTop) {\r\n        this.el.emit('lowered-from-top')\r\n      }\r\n\r\n      this.state.atTop = false\r\n    }\r\n\r\n    return this.state.atTop\r\n  },\r\n\r\n  isBelowDepth(barPosition) {\r\n\r\n    // Below target depth.  No tolerance - must pass target depth.\r\n    if (barPosition.y < this.data.targetDepth) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  },\r\n\r\n  checkIfBelowDepth(barPosition) {\r\n    if (this.isBelowDepth(barPosition)) {\r\n\r\n      if (!this.state.belowDepth) {\r\n        this.el.emit('hit-target-depth')\r\n      }\r\n\r\n      this.state.belowDepth = true\r\n    }\r\n    else {\r\n      if (this.state.belowDepth) {\r\n        this.el.emit('upwards-from-target-depth')\r\n      }\r\n\r\n      this.state.belowDepth = false\r\n    }\r\n\r\n    return this.state.belowDepth\r\n  },\r\n\r\n  isBelowSafetyPins(barPosition) {\r\n\r\n    // Below safety pins\r\n    // wait until fully 5cm below, to be sure lifter is bailing out, not just performing a deep rep.\r\n    if (barPosition.y < (this.data.safetyPinHeight - 0.05)) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  },\r\n\r\n  checkIfBelowSafetyPins(barPosition) {\r\n    if (this.isBelowSafetyPins(barPosition)) {\r\n\r\n      if (!this.state.belowSafetyPins) {\r\n        this.el.emit('below-safety-pins')\r\n      }\r\n\r\n      this.state.belowSafetyPins = true\r\n    }\r\n    else {\r\n      if (this.state.belowSafetyPins) {\r\n        this.el.emit('bailed-out')\r\n\r\n        // following bail-out, bar is no longer on the shoulders.\r\n        this.state.barOnShoulders = false\r\n      }\r\n\r\n      this.state.belowSafetyPins = false\r\n    }\r\n\r\n    return this.state.belowSafetyPins\r\n  },\r\n\r\n  tick() {\r\n    barPosition = this.el.sceneEl.components['bar-position'].barPosition\r\n\r\n    // is the lifter inside the rack?\r\n    const insideRack = this.checkIfInsideRack(barPosition)\r\n\r\n    // if not inside rack, nothing else can happen.\r\n    if (!insideRack) return\r\n\r\n    // is the lifter at the pins (likely either taking on, or dropping off the bar?)\r\n    // This also updates state about whether or not the lifter has the bar on their shoulders.\r\n    this.checkIfAtHooks(barPosition)\r\n\r\n    // is the lifter at the top of a rep?\r\n    this.checkIfAtTop(barPosition)\r\n\r\n    // has the lifter gone below target depth?\r\n    this.checkIfBelowDepth(barPosition)\r\n\r\n    // has the lifter bailed out on the safety pins?\r\n    this.checkIfBelowSafetyPins(barPosition)\r\n\r\n  }\r\n})","\r\n// Component set on scene.\r\n// Tracks camera and maintains public data for\r\n// - cameraPostion\r\n// - cameraQuaternion\r\n// - barPosition\r\n// All as measured in rack space.\r\n\r\n// No implemented support for switching camera / multi-camera\r\n\r\n// as far as possible, we try to work in rack space.\r\n// In rack space, x is left-right and z is forward (+ve) and backward (-ve)\r\n// Typically this will not align with world space.\r\n\r\nAFRAME.registerComponent('bar-position', {\r\n  \r\n  init() {\r\n    // called once when component is added to an entity\r\n\r\n    // camera position & quaternion in Rack Space.  Updated every tick.\r\n    this.cameraPosition = new THREE.Vector3()\r\n    this.cameraQuaternion = new THREE.Quaternion()\r\n\r\n    // for working\r\n    this.tempQuaternion = new THREE.Quaternion()\r\n\r\n    // world position of rack.\r\n    this.rackEl = document.querySelector('#rack')\r\n    rack = this.rackEl.object3D\r\n    this.rackInverseTransform = new THREE.Matrix4()\r\n    rack.updateWorldMatrix()\r\n    this.rackInverseTransform.copy(rack.matrixWorld)\r\n    this.rackInverseTransform.invert()\r\n\r\n    // now if I apply rackInverseTransform to an object in worldSpace, I get it's transform in rack space.\r\n    // vector to track bar position, in rack-space.\r\n    // Public.\r\n    this.barPosition = new THREE.Vector3()\r\n    \r\n    this.barOffset = new THREE.Vector3()\r\n    // for now, hard code bar 20 cm behind camera, 10cm below\r\n    this.barOffset.set(0, -0.1, -0.2)\r\n    this.getCameraAndBarPosition()\r\n    \r\n  },\r\n\r\n  getCameraAndBarPosition() {\r\n\r\n    const position = this.cameraPosition\r\n    const quaternion = this.cameraQuaternion\r\n\r\n    this.el.sceneEl.camera.getWorldPosition(position);\r\n    this.el.sceneEl.camera.getWorldQuaternion(quaternion);\r\n\r\n    const rackInverseTransform = this.rackInverseTransform\r\n    position.applyMatrix4(rackInverseTransform)\r\n    this.tempQuaternion.setFromRotationMatrix(rackInverseTransform)\r\n    quaternion.multiply(this.tempQuaternion)\r\n\r\n    this.barPosition.addVectors(this.cameraPosition, this.barOffset)\r\n\r\n    // bar quaternion is assumed to always be the identity\r\n    // bar in standard orientation across the rack.\r\n  },\r\n\r\n  update() {\r\n    // called whenever component properties are updated\r\n\r\n  },\r\n\r\n  tick() {\r\n\r\n    this.getCameraAndBarPosition()\r\n  }\r\n})","AFRAME.registerComponent('in-rack-ui', {\r\n\r\n  schema: {\r\n    repsToGo: {default: 5},\r\n    message: {default: ''}\r\n  },\r\n\r\n  init() {\r\n    this.circle = document.createElement('a-circle')\r\n    this.circle.setAttribute('radius', 0.5)\r\n    this.el.appendChild(this.circle)\r\n\r\n    this.text = document.createElement('a-entity')\r\n    this.text.setAttribute('text', {color:  'black',\r\n                                    wrapCount: 15,\r\n                                    align: 'center'})\r\n    this.circle.appendChild(this.text)\r\n  },\r\n\r\n  update() {\r\n\r\n    this.text.setAttribute('text', `value: ${this.data.message}\\n${this.data.repsToGo} reps to go`)\r\n\r\n  }\r\n});\r\n","// Add to scene (it finds camera itself)\r\n// Generates 'nod' and 'shake' events\r\n\r\nAFRAME.registerComponent('nod-shake', {\r\n\r\n  schema: {\r\n    // sensitivity is measured in required cmulative radians of rotation (in either direction)\r\n    // without any significant movement that is dominated by another axis.\r\n    // 1 radian = approx 57 degrees\r\n    // For simplicity, we allow nods in both X & Z axis.  Unlikely to trigger false positives as\r\n    // head tilt is an unusual movement.  And means we don't need to worry about the camera's Y rotation.\r\n    // in determining which direction is \"nodding\"\r\n    nodSensitivity: {default: 0.5},\r\n    shakeSensitivity: {default: 1},\r\n    debug: {default: false}\r\n  },\r\n\r\n  init() {\r\n\r\n    this.cameraQuaternion = new THREE.Quaternion\r\n    this.lastQuaternion = new THREE.Quaternion\r\n    this.deltaQuaternion = new THREE.Quaternion\r\n    this.camera = this.el.sceneEl.camera\r\n\r\n    this.firstFrame = true\r\n\r\n    this.cumRotNod = 0\r\n    this.cumRotShake = 0\r\n\r\n    this.debugDisplayCounter = 0\r\n  },\r\n\r\n  update() {\r\n    if (this.data.debug) {\r\n      this.display = document.createElement('a-text')\r\n      this.display.object3D.position.set(0, 0, -3)\r\n      this.display.setAttribute('align', 'center')\r\n      this.display.setAttribute('value', 'Nod/shake debug')\r\n      this.camera.el.appendChild(this.display)\r\n    }\r\n    else {\r\n      if (this.display) {\r\n        this.display.parentNode.removeChild(this.display)\r\n        this.display = null\r\n      }\r\n    }\r\n  },\r\n\r\n  // primes debug display to reset 1 second after changes stop.\r\n  primeDebugReset() {\r\n    this.debugDisplayCounter++\r\n\r\n    setTimeout(() => {\r\n      this.debugDisplayCounter--\r\n      if (this.debugDisplayCounter <= 0) {\r\n        this.display.setAttribute('text', 'value: Nod/shake debug')\r\n      }\r\n    }, 1000)\r\n  },\r\n\r\n  tick() {\r\n\r\n    // avoid false positives at start of day\r\n    if (this.firstFrame) {\r\n      this.firstFrame = false\r\n      return\r\n    }\r\n\r\n    const quaternion = this.cameraQuaternion\r\n    const delta = this.deltaQuaternion\r\n\r\n    this.el.sceneEl.camera.getWorldQuaternion(quaternion);\r\n\r\n    // compute delta quaternion from last frame to this frame\r\n    delta.copy(this.lastQuaternion)\r\n    delta.invert()\r\n    delta.premultiply(quaternion)\r\n\r\n    // Convert to axis and angle as described here.\r\n    // https://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm   \r\n    delta.normalize()\r\n    const s = Math.sqrt(1-delta.w*delta.w)\r\n    if (s < 0.0001) {\r\n      // no significant movement\r\n    }\r\n    else {\r\n\r\n      const angle = 2 * Math.acos(delta.w)\r\n      const absAngle = Math.abs(angle)\r\n      console.log(\"Absolute angle of rotation: \", absAngle)\r\n\r\n      let x = delta.x\r\n      let y = delta.y\r\n      let z = delta.z\r\n\r\n      if (Math.abs(x) >= Math.abs(y) && Math.abs(x) >= Math.abs(z)) {\r\n        // x axis dominant\r\n        this.cumRotNod += absAngle\r\n        this.cumRotShake = 0\r\n        \r\n        if (this.data.debug) {\r\n          console.log(\"X-axis dominant.  Accumulated nod rotation:\", this.cumRotNod)\r\n        }\r\n      }\r\n      else if (Math.abs(y) >= Math.abs(x) && Math.abs(y) >= Math.abs(z)) {\r\n        // y axis dominant\r\n        this.cumRotNod = 0\r\n        this.cumRotShake += absAngle\r\n        \r\n        if (this.data.debug) {\r\n          console.log(\"Y-axis dominant.  Accumulated shake rotation:\", this.cumRotShake)\r\n        }\r\n      }\r\n      else {\r\n        // z-axis dominant\r\n        this.cumRotNod += absAngle\r\n        this.cumRotShake = 0\r\n\r\n        if (this.data.debug) {\r\n          console.log(\"Z-axis dominant.  Accumulated nod rotation:\", this.cumRotNod)\r\n        }\r\n      }\r\n    }\r\n\r\n    // has any cumulative rotation broken threshold?\r\n    if (this.cumRotNod > this.data.nodSensitivity) {\r\n      this.el.emit(\"nod\")\r\n      this.cumRotNod = 0\r\n\r\n      if (this.data.debug) {\r\n        console.log(\"Emitted nod event\")\r\n        this.display.setAttribute('text', 'value: Detected nod')\r\n        this.primeDebugReset()\r\n      }\r\n    }\r\n\r\n    if (this.cumRotShake > this.data.shakeSensitivity) {\r\n      this.el.emit(\"shake\")\r\n      this.cumRotShake = 0\r\n\r\n      if (this.data.debug) {\r\n        console.log(\"Emitted shake event\")\r\n        this.display.setAttribute('text', 'value: Detected shake')\r\n        this.primeDebugReset()\r\n      }\r\n    }\r\n\r\n    // save off this quaternion for analysis next frame\r\n    this.lastQuaternion.copy(quaternion)\r\n  }\r\n})","AFRAME.registerGeometry('squatRack', {\r\n\r\n  schema: {\r\n    schema: {\r\n      width: {default: 1},\r\n      depth: {default: 1},\r\n      frontHeight: {default: 2.2},\r\n      rearHeight: {default: 1.8},\r\n      frameWidth: {default: 0.08},\r\n      hookRadiusSmall: {default: 0.02},\r\n      hookRadiusLarge: {default: 0.04},\r\n      hookDepth: {default: 0.08},\r\n      hookHeight: {default: 1.5},\r\n      safetyHeight: {default: 0.5},\r\n      safetyRadius: {default: 0.02},\r\n    },\r\n  },\r\n\r\n  init(data) {\r\n    const geometries = []\r\n    let geometry\r\n\r\n    // Origin of rack is center of rack, at floor level.\r\n\r\n    // post, back left\r\n    geometry = new THREE.BoxGeometry(data.frameWidth, data.rearHeight, data.frameWidth)\r\n    geometry.translate(-data.width / 2, data.rearHeight / 2, data.depth / 2)\r\n    geometries.push(geometry)\r\n\r\n    // post, back right\r\n    geometry = new THREE.BoxGeometry(data.frameWidth, data.rearHeight, data.frameWidth)\r\n    geometry.translate(data.width / 2, data.rearHeight / 2, data.depth / 2)\r\n    geometries.push(geometry)\r\n\r\n    // post, front left\r\n    geometry = new THREE.BoxGeometry(data.frameWidth, data.frontHeight, data.frameWidth)\r\n    geometry.translate(-data.width / 2, data.frontHeight / 2, -data.depth / 2)\r\n    geometries.push(geometry)\r\n\r\n    // post, back right\r\n    geometry = new THREE.BoxGeometry(data.frameWidth, data.frontHeight, data.frameWidth)\r\n    geometry.translate(data.width / 2, data.frontHeight / 2, -data.depth / 2)\r\n    geometries.push(geometry)\r\n\r\n    // hooks...\r\n    // left hook\r\n    geometry = new THREE.CylinderGeometry(data.hookRadiusSmall,\r\n                                          data.hookRadiusSmall,\r\n                                          data.hookDepth)\r\n    geometry.rotateX(Math.PI/2)\r\n    geometry.translate(-data.width / 2, data.hookHeight, -data.depth / 2 + data.hookDepth / 2)\r\n    geometries.push(geometry)\r\n\r\n    geometry = new THREE.CylinderGeometry(data.hookRadiusLarge,\r\n                                          data.hookRadiusLarge,\r\n                                          0.01)\r\n                                          geometry.rotateX(Math.PI/2)\r\n    geometry.translate(-data.width / 2, data.hookHeight, -data.depth / 2 + data.hookDepth)\r\n    geometries.push(geometry)\r\n\r\n    // right hook\r\n    geometry = new THREE.CylinderGeometry(data.hookRadiusSmall,\r\n                                          data.hookRadiusSmall,\r\n                                          data.hookDepth)\r\n    geometry.rotateX(Math.PI/2)\r\n    geometry.translate(data.width / 2, data.hookHeight, -data.depth / 2 + data.hookDepth / 2)\r\n    geometries.push(geometry)\r\n\r\n    geometry = new THREE.CylinderGeometry(data.hookRadiusLarge,\r\n                                          data.hookRadiusLarge,\r\n                                          0.01)\r\n                                          geometry.rotateX(Math.PI/2)\r\n    geometry.translate(data.width / 2, data.hookHeight, -data.depth / 2 + data.hookDepth)\r\n    geometries.push(geometry)\r\n\r\n    // left safety pin\r\n    geometry = new THREE.CylinderGeometry(data.safetyRadius,\r\n                                          data.safetyRadius,\r\n                                          data.depth)\r\n    geometry.rotateX(Math.PI/2)\r\n    geometry.translate(-data.width / 2, data.safetyHeight, 0)\r\n    geometries.push(geometry)\r\n\r\n    // right safety pin\r\n    geometry = new THREE.CylinderGeometry(data.safetyRadius,\r\n                                          data.safetyRadius,\r\n                                          data.depth)\r\n    geometry.rotateX(Math.PI/2)\r\n    geometry.translate(data.width / 2, data.safetyHeight, 0)\r\n    geometries.push(geometry)\r\n\r\n    this.geometry = THREE.BufferGeometryUtils.mergeBufferGeometries(geometries);\r\n  }\r\n\r\n})\r\n\r\nAFRAME.registerComponent('squat-rack', {\r\n\r\n  schema: {\r\n    width: {default: 1},\r\n    depth: {default: 1},\r\n    frontHeight: {default: 2.2},\r\n    rearHeight: {default: 1.8},\r\n    frameWidth: {default: 0.08},\r\n    hookRadiusSmall: {default: 0.02},\r\n    hookRadiusLarge: {default: 0.04},\r\n    hookDepth: {default: 0.08},\r\n    hookHeight: {default: 1.5},\r\n    safetyHeight: {default: 0.5},\r\n    safetyRadius: {default: 0.02},\r\n  },\r\n\r\n  init() {\r\n\r\n    this.el.setAttribute('geometry', {primitive: 'squatRack', \r\n                                      width: this.data.width,\r\n                                      depth: this.data.depth,\r\n                                      frontHeight: this.data.frontHeight,\r\n                                      rearHeight: this.data.rearHeight,\r\n                                      frameWidth: this.data.frameWidth,\r\n                                      hookRadiusSmall: this.data.hookRadiusSmall,\r\n                                      hookRadiusLarge: this.data.hookRadiusLarge,\r\n                                      hookDepth: this.data.hookDepth,\r\n                                      hookHeight: this.data.hookHeight,\r\n                                      safetyHeight: this.data.safetyHeight,\r\n                                      safetyRadius: this.data.safetyRadius})\r\n\r\n    this.el.setAttribute('material', {color: '#333'})\r\n  }\r\n})","// Configure on scene.\r\n\r\n// Updates UI component(s) to display rep status\r\n\r\nAFRAME.registerComponent('ui-updater', {\r\n\r\n  init() {\r\n\r\n    this.enteredRack = this.enteredRack.bind(this)\r\n    this.exitedRack = this.exitedRack.bind(this)\r\n    this.reachedHooks = this.reachedHooks.bind(this)\r\n    this.leftHooks = this.leftHooks.bind(this)\r\n    this.shoulderedBar = this.shoulderedBar.bind(this)\r\n    this.returnedBar = this.returnedBar.bind(this)\r\n    this.hitTop = this.hitTop.bind(this)\r\n    this.loweredFromTop = this.loweredFromTop.bind(this)\r\n    this.hitTargetDepth = this.hitTargetDepth.bind(this)\r\n    this.upwardsFromTargetDepth = this.upwardsFromTargetDepth.bind(this)\r\n    this.belowSafetyPins = this.belowSafetyPins.bind(this)\r\n    this.bailedOut = this.bailedOut.bind(this)\r\n\r\n    this.el.addEventListener('entered-rack', this.enteredRack);\r\n    this.el.addEventListener('exited-rack', this.exitedRack);\r\n    this.el.addEventListener('reached-hooks', this.reachedHooks);\r\n    this.el.addEventListener('left-hooks', this.leftHooks);\r\n    this.el.addEventListener('shouldered-bar', this.shoulderedBar);\r\n    this.el.addEventListener('returned-bar', this.returnedBar);\r\n    this.el.addEventListener('hit-top', this.hitTop);\r\n    this.el.addEventListener('lowered-from-top', this.loweredFromTop);\r\n    this.el.addEventListener('hit-target-depth', this.hitTargetDepth);\r\n    this.el.addEventListener('upwards-from-target-depth', this.upwardsFromTargetDepth);\r\n    this.el.addEventListener('below-safety-pins', this.belowSafetyPins);\r\n    this.el.addEventListener('bailed-out', this.bailedOut);\r\n\r\n    this.state = {\r\n      repPhase: 'none',  // one of: none, ready, down, up, rest\r\n      repsToGo: 0\r\n    }\r\n\r\n    this.insideRackUI = document.querySelector('#inside-rack-ui')\r\n    this.outsideRackUI = document.querySelector('#outside-rack-ui')\r\n\r\n  },\r\n\r\n  remove() {\r\n    this.el.removeEventListener('entered-rack', this.enteredRack);\r\n    this.el.removeEventListener('exited-rack', this.exitedRack);\r\n    this.el.removeEventListener('reached-hooks', this.reachedHooks);\r\n    this.el.removeEventListener('left-hooks', this.leftHooks);\r\n    this.el.removeEventListener('shouldered-bar', this.shoulderedBar);\r\n    this.el.removeEventListener('returned-bar', this.returnedBar);\r\n    this.el.removeEventListener('hit-top', this.hitTop);\r\n    this.el.removeEventListener('lowered-from-top', this.loweredFromTop);\r\n    this.el.removeEventListener('hit-target-depth', this.hitTargetDepth);\r\n    this.el.removeEventListener('upwards-from-target-depth', this.upwardsFromTargetDepth);\r\n    this.el.removeEventListener('below-safety-pins', this.belowSafetyPins);\r\n    this.el.removeEventListener('bailed-out', this.bailedOut);\r\n  },\r\n\r\n  setTargetReps(repCount) {\r\n\r\n    this.state.repsToGo = repCount\r\n    this.insideRackUI.setAttribute('in-rack-ui', {repsToGo: this.state.repsToGo})\r\n  },\r\n\r\n  repCompleted() {\r\n\r\n    this.state.repsToGo--\r\n    this.insideRackUI.setAttribute('in-rack-ui', {repsToGo: this.state.repsToGo})\r\n  },\r\n\r\n  enteredRack() {\r\n\r\n    if (this.insideRackUI) {\r\n      this.insideRackUI.setAttribute('visible', true)\r\n    }\r\n    \r\n    if (this.outsideRackUI) {\r\n      this.outsideRackUI.setAttribute('visible', false)\r\n    }\r\n\r\n    this.setTargetReps(5)\r\n\r\n  },\r\n\r\n  exitedRack() {\r\n\r\n    if (this.insideRackUI) {\r\n      this.insideRackUI.setAttribute('visible', false)\r\n    }\r\n    \r\n    if (this.outsideRackUI) {\r\n      this.outsideRackUI.setAttribute('visible', true)\r\n    }\r\n  },\r\n\r\n  reachedHooks() {\r\n\r\n    this.setMessage('Take weight of bar')\r\n  },\r\n\r\n  leftHooks() {\r\n    // no update needed\r\n  },\r\n\r\n  shoulderedBar() {\r\n    this.setMessage('Step Back')\r\n  },\r\n\r\n  returnedBar() {\r\n    this.setMessage('Finished!')\r\n  },\r\n\r\n  setMessage(message) {\r\n    this.insideRackUI.setAttribute('in-rack-ui', {message: message})\r\n  },\r\n\r\n  hitTop() {\r\n\r\n    // one of: none, ready, down, up, rest\r\n    switch (this.state.repPhase) {\r\n\r\n      case 'none':\r\n        this.state.repPhase = 'ready'\r\n        this.setMessage('Ready!')\r\n        break\r\n\r\n      case 'down':\r\n        this.state.repPhase = 'rest'\r\n        this.setMessage('Incomplete Rep')\r\n        break\r\n\r\n      case 'up':\r\n        this.state.repPhase = 'rest'\r\n        this.setMessage('Rep Complete')\r\n        this.repCompleted()\r\n        break\r\n\r\n      default: \r\n        console.error(\"Hit Top in unexpected state: \", this.state.repPhase)\r\n    }\r\n  },\r\n\r\n  loweredFromTop() {\r\n\r\n    // one of: none, ready, down, up, rest\r\n    switch (this.state.repPhase) {\r\n\r\n      case 'none':\r\n        this.setMessage('Stand Taller before beginning reps')\r\n        break\r\n\r\n      case 'ready':\r\n      case 'rest':\r\n        this.state.repPhase = 'down'\r\n        this.setMessage('Going down...')\r\n        break\r\n\r\n      case 'up':\r\n        this.setMessage('Stand at full height to complete last Rep!')\r\n        break\r\n\r\n      default: \r\n        console.error(\"Lowered From Top in unexpected state: \", this.state.repPhase)\r\n    }\r\n\r\n  },\r\n\r\n  hitTargetDepth() {\r\n\r\n    // one of: none, ready, down, up, rest\r\n    switch (this.state.repPhase) {\r\n\r\n      case 'none':\r\n        this.setMessage('Stand at full height before beginning reps')\r\n        break\r\n\r\n      case 'down':\r\n        this.setMessage('Hit Depth!')\r\n        this.state.repPhase = 'up'\r\n        break\r\n  \r\n      case 'up':\r\n        this.setMessage('Push up to complete this rep!')\r\n        break\r\n\r\n      default: \r\n        console.error(\"Lowered From Top in unexpected state: \", this.state.repPhase)\r\n    }\r\n  },\r\n\r\n  upwardsFromTargetDepth() {\r\n\r\n    // one of: none, ready, down, up, rest\r\n    switch (this.state.repPhase) {\r\n\r\n      case 'up':\r\n        // expected.  No action / state change needed\r\n        break\r\n\r\n      default: \r\n        console.error(\"Lowered From Top in unexpected state: \", this.state.repPhase)\r\n    }\r\n  },\r\n\r\n  belowSafetyPins() {\r\n\r\n    this.setMessage('Failed set.  Step out of rack and remove weight plates from bar.')\r\n\r\n  },\r\n\r\n  bailedOut() {\r\n    this.setMessage('Failed set.  Step out of rack and remove weight plates from bar.')\r\n  }\r\n})\r\n","AFRAME.registerComponent('vertical-controls', {\r\n\r\n  init() {\r\n\r\n    this.verticalVelocity = 0\r\n    this.verticalAcceleration = 0\r\n\r\n    this.keyDown = this.keyDown.bind(this)\r\n    this.keyUp = this.keyUp.bind(this)\r\n\r\n    window.addEventListener('keydown', this.keyDown)\r\n    window.addEventListener('keyup', this.keyUp)\r\n  },\r\n\r\n  keyDown(e) {\r\n\r\n    if (e.key === \"o\") {\r\n      this.verticalAcceleration += 2\r\n    }\r\n\r\n    if (e.key === \"k\") {\r\n      this.verticalAcceleration = -2\r\n    }\r\n  },\r\n\r\n  keyUp(e) {\r\n    \r\n    if (e.key === \"o\" || e.key === \"k\") {\r\n      this.verticalVelocity = 0\r\n      this.verticalAcceleration = 0\r\n    }\r\n  },\r\n\r\n  tick(t, dt) {\r\n\r\n    velDelta = dt * this.verticalAcceleration / 1000\r\n    this.verticalVelocity += velDelta\r\n    if (this.verticalVelocity > 1) this.verticalVelocity = 1\r\n    if (this.verticalVelocity < -1) this.verticalVelocity = -1\r\n\r\n    yDelta = dt * this.verticalVelocity / 1000\r\n    this.el.object3D.position.y += yDelta\r\n  }\r\n})","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/* global AFRAME, THREE */\r\n\r\nrequire('./src/bar-position.js')\r\nrequire('./src/bar-monitor.js')\r\nrequire('./src/in-rack-ui.js')\r\nrequire('./src/ui-updater.js')\r\nrequire('./src/squat-rack.js')\r\nrequire('./src/vertical-controls.js')\r\nrequire('./src/nod-shake.js')"],"names":["root","factory","exports","module","define","amd","a","i","self","AFRAME","registerComponent","dependencies","schema","hookPosition","type","default","x","y","z","topHeight","targetDepth","safetyPinHeight","rackWidth","rackDepth","init","this","state","insideRack","lifterAtHooks","barOnShoulders","atTop","belowDepth","belowSafetyPins","isInsideRack","barPosition","insideLR","insideFB","Math","abs","data","zOffset","checkIfInsideRack","el","emit","isAtHooks","atHooksLR","atHooksFB","checkIfAtHooks","isAtTop","checkIfAtTop","isBelowDepth","checkIfBelowDepth","isBelowSafetyPins","checkIfBelowSafetyPins","tick","sceneEl","components","cameraPosition","THREE","Vector3","cameraQuaternion","Quaternion","tempQuaternion","rackEl","document","querySelector","rack","object3D","rackInverseTransform","Matrix4","updateWorldMatrix","copy","matrixWorld","invert","barOffset","set","getCameraAndBarPosition","position","quaternion","camera","getWorldPosition","getWorldQuaternion","applyMatrix4","setFromRotationMatrix","multiply","addVectors","update","repsToGo","message","circle","createElement","setAttribute","appendChild","text","color","wrapCount","align","nodSensitivity","shakeSensitivity","debug","lastQuaternion","deltaQuaternion","firstFrame","cumRotNod","cumRotShake","debugDisplayCounter","display","parentNode","removeChild","primeDebugReset","setTimeout","delta","premultiply","normalize","sqrt","w","angle","acos","absAngle","console","log","registerGeometry","width","depth","frontHeight","rearHeight","frameWidth","hookRadiusSmall","hookRadiusLarge","hookDepth","hookHeight","safetyHeight","safetyRadius","geometries","geometry","BoxGeometry","translate","push","CylinderGeometry","rotateX","PI","BufferGeometryUtils","mergeBufferGeometries","primitive","enteredRack","bind","exitedRack","reachedHooks","leftHooks","shoulderedBar","returnedBar","hitTop","loweredFromTop","hitTargetDepth","upwardsFromTargetDepth","bailedOut","addEventListener","repPhase","insideRackUI","outsideRackUI","remove","removeEventListener","setTargetReps","repCount","repCompleted","setMessage","error","verticalVelocity","verticalAcceleration","keyDown","keyUp","window","e","key","t","dt","velDelta","yDelta","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__"],"sourceRoot":""}