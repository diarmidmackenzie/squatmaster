{"version":3,"file":"squatmaster.min.js","mappings":"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","sources":["webpack://squatmaster/webpack/universalModuleDefinition","webpack://squatmaster/./node_modules/aframe-polygon-wireframe/index.js","webpack://squatmaster/./src/bar-monitor.js","webpack://squatmaster/./src/bar-position.js","webpack://squatmaster/./src/calibration-flow.js","webpack://squatmaster/./src/in-rack-ui.js","webpack://squatmaster/./src/nod-shake.js","webpack://squatmaster/./src/squat-rack.js","webpack://squatmaster/./src/ui-manager.js","webpack://squatmaster/./src/ui-updater.js","webpack://squatmaster/./src/vertical-controls.js","webpack://squatmaster/webpack/bootstrap","webpack://squatmaster/./index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","AFRAME.registerComponent(\"polygon-wireframe\", {\r\n\r\n    schema: {\r\n        color: { type: 'color', default: 'grey' },\r\n        opacity: { type: 'number', default: 1 },\r\n        hiddenOpacity: { type: 'number', default: 0 },\r\n        dashed: { type: 'boolean', default: false },\r\n        dashSize: { type: 'number', default: 3 },\r\n        gapSize: { type: 'number', default: 1 },\r\n        dashScale: { type: 'number', default: 30 },\r\n    },\r\n\r\n    init() {\r\n\r\n      this.updateGeometry = this.updateGeometry.bind(this)\r\n      this.el.addEventListener('object3dset', this.updateGeometry)\r\n      if (this.el.getObject3D('mesh')) {\r\n        this.updateGeometry()\r\n      }\r\n    },\r\n\r\n    updateGeometry() {\r\n\r\n      const baseGeometry = this.el.getObject3D('mesh').geometry\r\n      if (!baseGeometry) {\r\n        return\r\n      }\r\n\r\n      if (this.edges) {\r\n        this.edges.dispose()\r\n      }\r\n\r\n      this.edges = new THREE.EdgesGeometry(baseGeometry);\r\n      this.update()\r\n    },\r\n\r\n    update() {\r\n\r\n      const oldMaterial = this.material\r\n      const oldLine = this.line\r\n      const oldHiddenMaterial = this.hiddenMaterial\r\n      const oldHiddenLine = this.hiddenLine\r\n\r\n      const data = this.data\r\n\r\n      this.material = this.createLineMaterial(data.color, data.opacity)\r\n\r\n      if (data.hiddenOpacity !== 0 && \r\n          data.hiddenOpacity !== data.opacity) {\r\n        // separate material needed for hidden parts\r\n        this.hiddenMaterial = this.createLineMaterial(data.color, data.hiddenOpacity)\r\n\r\n        if (data.hiddenOpacity > data.opacity) {\r\n          console.warn(\"Opacity of hidden parts cannot be higher than the opacity of non-hidden parts\")\r\n          console.warn(\"Wireframe will be rendered with opacity \", data.hiddenOpacity, \" as set on hiddenOpacity property.\")\r\n        }\r\n      }\r\n      else {\r\n        this.hiddenMaterial = null\r\n      }\r\n\r\n      if (data.hiddenOpacity !== 0) {\r\n        const material = this.hiddenMaterial || this.material\r\n        material.depthWrite = false\r\n        material.depthTest = false\r\n        material.toneMapped = false\r\n      }\r\n      \r\n      this.line = new THREE.LineSegments( this.edges, this.material );\r\n      this.line.computeLineDistances();\r\n      this.el.object3D.add( this.line );\r\n\r\n      if (this.hiddenMaterial) {\r\n        this.hiddenLine = new THREE.LineSegments( this.edges, this.hiddenMaterial );\r\n        this.hiddenLine.computeLineDistances();\r\n        this.el.object3D.add( this.hiddenLine );\r\n      }\r\n\r\n      this.el.getObject3D('mesh').visible = false;\r\n\r\n      // dispose of any old materials & lines\r\n      function removeLineAndMaterial(line, material) {\r\n        if (line) {\r\n          line.removeFromParent()\r\n        }\r\n        if (material) {\r\n          material.dispose()\r\n        }\r\n      }\r\n      this.removeLineAndMaterial(oldLine, oldMaterial)\r\n      this.removeLineAndMaterial(oldHiddenLine, oldHiddenMaterial)\r\n    },\r\n\r\n    removeLineAndMaterial(line, material) {\r\n      if (line) {\r\n        line.removeFromParent()\r\n      }\r\n      if (material) {\r\n        material.dispose()\r\n      }\r\n    },\r\n\r\n    createLineMaterial(color, opacity) {\r\n\r\n      const data = this.data\r\n      let material\r\n      if (!data.dashed) {\r\n          material = new THREE.LineBasicMaterial( { color: color } )\r\n      }\r\n      else {\r\n          material = new THREE.LineDashedMaterial( { color: color,\r\n                                                     dashSize: data.dashSize,\r\n                                                     gapSize: data.gapSize,\r\n                                                     scale: data.dashScale } )\r\n      }\r\n      material.opacity = opacity\r\n      if (opacity !== 1) {\r\n        material.transparent = true\r\n      }\r\n\r\n      return material\r\n    },\r\n\r\n    remove() {\r\n\r\n      this.el.removeEventListener('object3dset', this.updateGeometry)\r\n      this.el.getObject3D('mesh').visible = true;\r\n      if (this.edges) {\r\n        this.edges.dispose()\r\n      }\r\n\r\n      this.removeLineAndMaterial(this.line, this.material)\r\n    }\r\n})","// component set on scene.\r\n// Contains configuration of key bar thresholds.\r\n// Monitors bar position and generates events when thresholds are hit.\r\nAFRAME.registerComponent('bar-monitor', {\r\n\r\n  dependencies: ['bar-position'],\r\n\r\n  schema: {\r\n    // Position of bar when on hooks (before the lift begins)\r\n    // Co-ordinates in rack space.\r\n    hookPosition : {type: 'vec3', default: {x: 0, y: 1.5, z: -0.5}},\r\n\r\n    // height of bar when lifter is standing up straight.\r\n    topHeight : {default: 0},\r\n\r\n    // target depth for bar, to achieve parallel thighs.\r\n    targetDepth: {default: 0},\r\n\r\n    // height of the bar when it hits the safety pins.\r\n    safetyPinHeight: {default: 0},\r\n\r\n    // width of rack in meters\r\n    rackWidth: {default: 1},\r\n\r\n    // depth (z-direction) of rack in meters\r\n    rackDepth: {default: 1},\r\n\r\n    // whether to show planes\r\n    showPlanes: {default: true},\r\n\r\n    // opacity of planes (if used)\r\n    opacity: {default: 0.3}\r\n\r\n  },\r\n\r\n  init() {\r\n\r\n    this.state = {\r\n      insideRack : false,\r\n      lifterAtHooks : false,\r\n      barOnShoulders : false,\r\n      atTop : false,\r\n      belowDepth : false,\r\n      belowSafetyPins : false,\r\n    }\r\n   },\r\n\r\n  update() {\r\n    this.deletePlanes()\r\n\r\n    if (this.data.showPlanes) {\r\n      this.createPlanes()\r\n    }\r\n  },\r\n\r\n  createPlanes() {\r\n\r\n    this.aboveTopPlane = this.createPlane(this.data.topHeight, 'outline', 'white')\r\n    this.topPlaneUpwards = this.createPlane(this.data.topHeight - 0.05, 'outline', 'green')\r\n    //this.topPlaneDownwards = this.createPlane(this.data.topHeight - 0.05, , 'outline', 'white')\r\n    this.depthPlaneUpwards = this.createPlane(this.data.targetDepth, 'outline', 'green')\r\n    //this.depthPlaneDownwards = this.createPlane(this.data.targetDepth, , 'outline', 'white')\r\n    this.safetyPlaneTop = this.createPlane(this.data.safetyPinHeight, 'outline', 'orange')\r\n    this.safetyPlaneBottom = this.createPlane(this.data.safetyPinHeight - 0.05, 'outline', 'red')\r\n  },\r\n\r\n  deletePlanes() {\r\n\r\n    deletePlane = (plane) => {\r\n      if (plane) {\r\n        plane.parentNode.removeChild(plane)\r\n      }\r\n    }\r\n\r\n    deletePlane(this.aboveTopPlane)\r\n    deletePlane(this.topPlaneUpwards)\r\n    deletePlane(this.topPlaneDownwards)\r\n    deletePlane(this.depthPlaneUpwards)\r\n    deletePlane(this.depthPlaneDownwards)\r\n    deletePlane(this.safetyPlaneTop)\r\n    deletePlane(this.safetyPlaneBottom)\r\n\r\n    this.aboveTopPlane = null\r\n    this.aboveTopPlane = null\r\n    this.topPlaneUpwards = null\r\n    this.topPlaneDownwards = null\r\n    this.depthPlaneUpwards = null\r\n    this.depthPlaneDownwards = null\r\n    this.safetyPlaneTop = null\r\n    this.safetyPlaneBottom = null\r\n  },\r\n\r\n  createPlane(height, style, color, side) {\r\n    const plane = document.createElement('a-plane')\r\n    plane.setAttribute('width', this.data.rackWidth)\r\n    plane.setAttribute('height', this.data.rackDepth)\r\n    plane.object3D.position.y = height\r\n    plane.object3D.rotation.x = Math.PI / 2\r\n\r\n    if (style === 'transparent') {\r\n      plane.setAttribute('material', {opacity: this.data.opacity,\r\n                                      transparent: true,\r\n                                      color: color,\r\n                                      side: side})\r\n    }\r\n    else {\r\n      console.assert(style === 'outline')\r\n      plane.setAttribute('polygon-wireframe', {color: color})\r\n    }\r\n\r\n    const rackEl = document.querySelector('#rack')\r\n    rackEl.appendChild(plane)\r\n\r\n    return plane\r\n  },\r\n\r\n  isInsideRack(barPosition) {\r\n\r\n    let insideLR, insideFB\r\n\r\n    if (Math.abs(barPosition.x - this.data.hookPosition.x) < this.data.rackWidth / 2) {\r\n      insideLR = true\r\n    }\r\n\r\n    // zOffset relative to hook Position will be positive (up to rack depth)\r\n    // or very small negative (to 10cm tolerance) when inside the rack.\r\n    const zOffset = barPosition.z - this.data.hookPosition.z\r\n    if ((zOffset) < this.data.rackDepth && \r\n        (zOffset) > -0.1) {\r\n      insideFB = true\r\n    }\r\n\r\n    return (insideLR && insideFB)\r\n\r\n  },\r\n\r\n  checkIfInsideRack(barPosition) {\r\n    if (this.isInsideRack(barPosition)) {\r\n\r\n      if (!this.state.insideRack) {\r\n        this.el.emit('entered-rack')\r\n      }\r\n\r\n      this.state.insideRack = true\r\n    }\r\n    else {\r\n      if (this.state.insideRack) {\r\n        this.el.emit('exited-rack')\r\n      }\r\n\r\n      this.state.insideRack = false\r\n    }\r\n\r\n    return this.state.insideRack\r\n  },\r\n\r\n  isAtHooks(barPosition) {\r\n\r\n    let atHooksLR, atHooksFB\r\n\r\n    // for L-R, anywhere in rack will do.\r\n    if (Math.abs(barPosition.x - this.data.hookPosition.x) < this.data.rackWidth / 2) {\r\n      atHooksLR = true\r\n    }\r\n\r\n    // 10cm tolerance for Front-Back.\r\n\r\n    // Note: user can subvert logic by bringing in bar very close to pins, then lowering directly in front of pins.\r\n    // App will assume bar has been returned to rack, when in fact it's still on users' shoulders.\r\n    // This behaviour seems really unlikely to happen, unless user is deliberatly trying to subvert the app...\r\n\r\n    // Not sure we can do any better without introducing risk of false negatives when bar\r\n    // is legitimately returned to the hooks.\r\n    if (Math.abs(this.data.hookPosition.z - barPosition.z) < 0.05) {\r\n      atHooksFB = true\r\n    }\r\n\r\n    return atHooksLR && atHooksFB\r\n  },\r\n\r\n  checkIfAtHooks(barPosition) {\r\n\r\n    if (this.isAtHooks(barPosition)) {\r\n      if (!this.state.lifterAtHooks) {\r\n        this.el.emit('reached-hooks')\r\n      }\r\n      this.state.lifterAtHooks = true\r\n    }\r\n    else {\r\n      if (this.state.lifterAtHooks) {\r\n        // lifter leaving hooks.\r\n        // may or may not have bar on shoulders.  Determine based on y position.\r\n\r\n        if (barPosition.y > this.data.hookPosition.y) {\r\n          // bar above hooks - must be on shoulders.\r\n\r\n          if (!this.state.barOnShoulders) {\r\n\r\n            this.el.emit('shouldered-bar')\r\n          }\r\n          \r\n          this.state.barOnShoulders = true\r\n        }\r\n        else {\r\n          // bar below hooks - must have deposited it back on the hooks.\r\n\r\n          if (this.state.barOnShoulders) {\r\n\r\n            this.el.emit('returned-bar')\r\n          }\r\n          \r\n          this.state.barOnShoulders = false\r\n        }\r\n\r\n        this.el.emit('left-hooks')\r\n      }\r\n      this.state.lifterAtHooks = false\r\n    }\r\n\r\n    return this.state.lifterAtHooks\r\n  },\r\n\r\n  isAtTop(barPosition) {\r\n\r\n    // 5cm tolerance.  Anything over top is considered at top.\r\n    if (this.data.topHeight - barPosition.y < 0.05) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  },\r\n\r\n  checkIfAtTop(barPosition) {\r\n    if (this.isAtTop(barPosition)) {\r\n\r\n      if (!this.state.atTop) {\r\n        this.el.emit('hit-top')\r\n      }\r\n\r\n      this.state.atTop = true\r\n    }\r\n    else {\r\n      if (this.state.atTop) {\r\n        this.el.emit('lowered-from-top')\r\n      }\r\n\r\n      this.state.atTop = false\r\n    }\r\n\r\n    return this.state.atTop\r\n  },\r\n\r\n  isBelowDepth(barPosition) {\r\n\r\n    // Below target depth.  No tolerance - must pass target depth.\r\n    if (barPosition.y < this.data.targetDepth) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  },\r\n\r\n  checkIfBelowDepth(barPosition) {\r\n    if (this.isBelowDepth(barPosition)) {\r\n\r\n      if (!this.state.belowDepth) {\r\n        this.el.emit('hit-target-depth')\r\n      }\r\n\r\n      this.state.belowDepth = true\r\n    }\r\n    else {\r\n      if (this.state.belowDepth) {\r\n        this.el.emit('upwards-from-target-depth')\r\n      }\r\n\r\n      this.state.belowDepth = false\r\n    }\r\n\r\n    return this.state.belowDepth\r\n  },\r\n\r\n  isBelowSafetyPins(barPosition) {\r\n\r\n    // Below safety pins\r\n    // wait until fully 5cm below, to be sure lifter is bailing out, not just performing a deep rep.\r\n    if (barPosition.y < (this.data.safetyPinHeight - 0.05)) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  },\r\n\r\n  checkIfBelowSafetyPins(barPosition) {\r\n    if (this.isBelowSafetyPins(barPosition)) {\r\n\r\n      if (!this.state.belowSafetyPins) {\r\n        this.el.emit('below-safety-pins')\r\n      }\r\n\r\n      this.state.belowSafetyPins = true\r\n    }\r\n    else {\r\n      if (this.state.belowSafetyPins) {\r\n        this.el.emit('bailed-out')\r\n\r\n        // following bail-out, bar is no longer on the shoulders.\r\n        this.state.barOnShoulders = false\r\n      }\r\n\r\n      this.state.belowSafetyPins = false\r\n    }\r\n\r\n    return this.state.belowSafetyPins\r\n  },\r\n\r\n  tick() {\r\n    barPosition = this.el.sceneEl.components['bar-position'].barPosition\r\n\r\n    // is the lifter inside the rack?\r\n    const insideRack = this.checkIfInsideRack(barPosition)\r\n\r\n    // if not inside rack, nothing else can happen.\r\n    if (!insideRack) return\r\n\r\n    // is the lifter at the pins (likely either taking on, or dropping off the bar?)\r\n    // This also updates state about whether or not the lifter has the bar on their shoulders.\r\n    this.checkIfAtHooks(barPosition)\r\n\r\n    // is the lifter at the top of a rep?\r\n    this.checkIfAtTop(barPosition)\r\n\r\n    // has the lifter gone below target depth?\r\n    this.checkIfBelowDepth(barPosition)\r\n\r\n    // has the lifter bailed out on the safety pins?\r\n    this.checkIfBelowSafetyPins(barPosition)\r\n\r\n  }\r\n})","\r\n// Component set on scene.\r\n// Tracks camera and maintains public data for\r\n// - cameraPostion\r\n// - cameraQuaternion\r\n// - barPosition\r\n// All as measured in rack space.\r\n\r\n// No implemented support for switching camera / multi-camera\r\n\r\n// as far as possible, we try to work in rack space.\r\n// In rack space, x is left-right and z is forward (+ve) and backward (-ve)\r\n// Typically this will not align with world space.\r\n\r\nAFRAME.registerComponent('bar-position', {\r\n  \r\n  init() {\r\n    // called once when component is added to an entity\r\n\r\n    // camera position & quaternion in Rack Space.  Updated every tick.\r\n    this.cameraPosition = new THREE.Vector3()\r\n    this.cameraQuaternion = new THREE.Quaternion()\r\n\r\n    // for working\r\n    this.tempQuaternion = new THREE.Quaternion()\r\n\r\n    // world position of rack.\r\n    this.rackEl = document.querySelector('#rack')\r\n    rack = this.rackEl.object3D\r\n    this.rackInverseTransform = new THREE.Matrix4()\r\n    rack.updateWorldMatrix()\r\n    this.rackInverseTransform.copy(rack.matrixWorld)\r\n    this.rackInverseTransform.invert()\r\n\r\n    // now if I apply rackInverseTransform to an object in worldSpace, I get it's transform in rack space.\r\n    // vector to track bar position, in rack-space.\r\n    // Public.\r\n    this.barPosition = new THREE.Vector3()\r\n    \r\n    this.barOffset = new THREE.Vector3()\r\n    // Potential for bar offset, but setting to zero for now.\r\n    // Plane visualization doesn't accoutn for this and would need to be updated if we added this back in.\r\n    //this.barOffset.set(0, -0.1, -0.2)\r\n    this.getCameraAndBarPosition()\r\n    \r\n  },\r\n\r\n  getCameraAndBarPosition() {\r\n\r\n    const position = this.cameraPosition\r\n    const quaternion = this.cameraQuaternion\r\n\r\n    this.el.sceneEl.camera.getWorldPosition(position);\r\n    this.el.sceneEl.camera.getWorldQuaternion(quaternion);\r\n\r\n    const rackInverseTransform = this.rackInverseTransform\r\n    position.applyMatrix4(rackInverseTransform)\r\n    this.tempQuaternion.setFromRotationMatrix(rackInverseTransform)\r\n    quaternion.multiply(this.tempQuaternion)\r\n\r\n    this.barPosition.addVectors(this.cameraPosition, this.barOffset)\r\n\r\n    // bar quaternion is assumed to always be the identity\r\n    // bar in standard orientation across the rack.\r\n  },\r\n\r\n  update() {\r\n    // called whenever component properties are updated\r\n\r\n  },\r\n\r\n  tick() {\r\n\r\n    this.getCameraAndBarPosition()\r\n  }\r\n})","const calibrationUIImages = {\r\n  start: '#calibration0',\r\n  bar: '#calibration1',\r\n  hooks: '#calibration2',\r\n  top: '#calibration3', \r\n  depth: '#calibration4',\r\n  safety: '#calibration5',\r\n  review: '#calibration6',\r\n  done: '#calibration7',\r\n}\r\n\r\nAFRAME.registerComponent('calibration-flow', {\r\n\r\n  dependencies: ['bar-position'],\r\n\r\n  init() {\r\n\r\n    this.nodEvent = this.nodEvent.bind(this)\r\n    this.shakeEvent = this.shakeEvent.bind(this)\r\n    this.reachedHooks = this.reachedHooks.bind(this)\r\n    \r\n    this.el.addEventListener('nod', this.nodEvent);\r\n    this.el.addEventListener('shake', this.shakeEvent);\r\n    this.el.addEventListener('reached-hooks', this.reachedHooks);\r\n\r\n    // UI state\r\n    this.stage = 'start' // one of: start, hooks, top, depth, safety, review, done\r\n    this.saving = false\r\n    this.deleting = false\r\n\r\n    this.calibrationUI = document.getElementById('calibration-ui')\r\n  },\r\n\r\n  update() {\r\n    this.updateUI()\r\n  },\r\n\r\n  remove() {\r\n    this.el.removeEventListener('nod', this.nodEvent);\r\n    this.el.removeEventListener('shake', this.shakeEvent);\r\n  },\r\n\r\n  beginCalibrationProcess() {\r\n\r\n    this.stage = 'start'\r\n    this.calibrationUI.object3D.visible = true\r\n    this.updateUI()\r\n\r\n  },\r\n\r\n  endCalibrationProcess() {\r\n    this.calibrationUI.object3D.visible = false\r\n    this.el.emit('calibration-complete')\r\n  },\r\n\r\n  getBarPosition() {\r\n\r\n    const component = this.el.components['bar-position']\r\n    return component.barPosition\r\n  },\r\n\r\n  // displays \"saving\" message for 1 second, then moves to next stage.\r\n  moveToStage(stage) {\r\n\r\n    this.saving = true\r\n    this.updateUI()\r\n\r\n    setTimeout(() => {\r\n      this.stage = stage\r\n      this.saving = false\r\n      this.updateUI()\r\n    }, 1000)\r\n  },\r\n\r\n  // equivalent function when moving back a stage...\r\n  moveBackToStage(stage) {\r\n\r\n    this.deleting = true\r\n\r\n    // short timeout, just to avoid duplicate shakes...\r\n    setTimeout(() => {\r\n      this.stage = stage\r\n      this.deleting = false\r\n      this.updateUI()\r\n    }, 500)\r\n  },\r\n\r\n  reachedHooks() {\r\n\r\n    // special case for step 6 -> 7 transition, based on reaching hooks again,\r\n    // not based on nods...\r\n\r\n    if (this.stage === 'review') {\r\n      this.moveToStage('done')\r\n    }\r\n  },\r\n\r\n  nodEvent() {\r\n\r\n    let yPos\r\n\r\n    switch (this.stage) {\r\n\r\n      case 'start':\r\n        // no data to record yet.\r\n        this.moveToStage('bar')\r\n        break\r\n\r\n      case 'bar':\r\n        // no data to record yet.\r\n        this.moveToStage('hooks')\r\n        break\r\n\r\n      case 'hooks':\r\n        // new Vector3 to ensure update happens.\r\n        const pos = new THREE.Vector3()\r\n        pos.copy(this.getBarPosition())\r\n        this.el.setAttribute('bar-monitor', {hookPosition: pos})\r\n        this.moveToStage('top')\r\n        break\r\n  \r\n      case 'top':\r\n        ypos = this.getBarPosition().y\r\n        this.el.setAttribute('bar-monitor', {topHeight: ypos})\r\n        this.moveToStage('depth')\r\n        break\r\n\r\n      case 'depth':\r\n        ypos = this.getBarPosition().y\r\n        this.el.setAttribute('bar-monitor', {targetDepth: ypos})\r\n        this.moveToStage('safety')\r\n        break\r\n\r\n      case 'safety':\r\n        ypos = this.getBarPosition().y\r\n        this.el.setAttribute('bar-monitor', {safetyPinHeight: ypos})\r\n        this.moveToStage('review')\r\n        break\r\n\r\n      case 'review':\r\n        // No action\r\n        // Final move step 6 -> 7 is based on 'reached-hooks' event\r\n        break\r\n\r\n      case 'done':\r\n        this.endCalibrationProcess()\r\n        break\r\n\r\n      default:\r\n        console.error(\"Hit Nod in unexpected state: \", this.stage)\r\n        break\r\n    }\r\n  },\r\n\r\n  shakeEvent() {\r\n\r\n    switch (this.stage) {\r\n\r\n      case 'start':\r\n        // no effect\r\n        break\r\n\r\n      case 'hooks':\r\n        this.moveBackToStage('start')\r\n        break\r\n  \r\n      case 'top':\r\n        this.moveBackToStage('hooks')\r\n        break\r\n\r\n      case 'depth':\r\n        this.moveBackToStage('top')\r\n        break\r\n\r\n      case 'safety':\r\n        this.moveBackToStage('depth')\r\n        break\r\n\r\n      case 'review':\r\n        this.moveBackToStage('safety')\r\n        break\r\n\r\n      case 'done':\r\n        // no effect - too late\r\n        // (TBC - we could desig a flow to restart the whole calibration process again)\r\n        break\r\n         \r\n      default:\r\n        console.error(\"Hit Nod in unexpected state: \", this.stage)\r\n        break\r\n    }\r\n  },\r\n\r\n  updateUI() {\r\n\r\n    this.calibrationUI.setAttribute('calibration-ui',\r\n                                     {saving: this.saving,\r\n                                      deleting: this.deleting,\r\n                                      imageSelector: calibrationUIImages[this.stage]})\r\n  }\r\n})\r\n\r\nAFRAME.registerComponent('calibration-ui', {\r\n\r\n  schema: {\r\n    imageSelector: {type: 'string'},\r\n    saving: {default: false},  // to re-implement\r\n    deleting: {default: false}, // to re-implement\r\n  },\r\n\r\n  init() {\r\n    this.circle = document.createElement('a-entity')\r\n    this.circle.setAttribute('geometry', 'primitive: circle; radius: 1')\r\n    this.circle.setAttribute('material', 'color: white; opacity: 0.8; transparent: true')\r\n    this.el.appendChild(this.circle)\r\n\r\n    \r\n\r\n\r\n  },\r\n\r\n  createImage(src) {\r\n\r\n    this.image = document.createElement('a-image')\r\n    this.image.setAttribute('alpha-test', 0.5)\r\n    this.image.setAttribute('width', 2)\r\n    this.image.setAttribute('height', 2)\r\n    this.image.setAttribute('transparent', true)\r\n    this.image.object3D.position.z = 0.001\r\n    this.image.setAttribute('src', src)\r\n    this.circle.appendChild(this.image)\r\n\r\n  },\r\n\r\n  deleteImage() {\r\n\r\n    if (this.image) {\r\n      this.image.parentNode.removeChild(this.image)\r\n      this.image = null\r\n    }\r\n  },\r\n\r\n  update() {\r\n    this.deleteImage()\r\n    if (this.data.imageSelector) {\r\n   \r\n      this.createImage(this.data.imageSelector)\r\n    }\r\n  }\r\n});\r\n","AFRAME.registerComponent('inside-rack-ui', {\r\n\r\n  schema: {\r\n    repsToGo: {default: 5},\r\n    message: {default: ''}\r\n  },\r\n\r\n  init() {\r\n    this.circle = document.createElement('a-circle')\r\n    this.circle.setAttribute('radius', 0.5)\r\n    this.el.appendChild(this.circle)\r\n\r\n    this.text = document.createElement('a-entity')\r\n    this.text.setAttribute('text', {color: 'black',\r\n                                    wrapCount: 15,\r\n                                    align: 'center'})\r\n    this.circle.appendChild(this.text)\r\n  },\r\n\r\n  update() {\r\n\r\n    this.text.setAttribute('text', `value: ${this.data.message}\\n${this.data.repsToGo} reps to go`)\r\n\r\n  }\r\n});\r\n","// Add to scene (it finds camera itself)\r\n// Generates 'nod' and 'shake' events\r\n\r\nAFRAME.registerComponent('nod-shake', {\r\n\r\n  schema: {\r\n    // sensitivity is measured in required cmulative radians of rotation (in either direction)\r\n    // without any significant movement that is dominated by another axis.\r\n    // 1 radian = approx 57 degrees\r\n    // For simplicity, we allow nods in both X & Z axis.  Unlikely to trigger false positives as\r\n    // head tilt is an unusual movement.  And means we don't need to worry about the camera's Y rotation.\r\n    // in determining which direction is \"nodding\"\r\n    nodSensitivity: {default: 0.5},\r\n    shakeSensitivity: {default: 0.5},\r\n    debug: {default: false}\r\n  },\r\n\r\n  init() {\r\n\r\n    this.cameraQuaternion = new THREE.Quaternion\r\n    this.lastQuaternion = new THREE.Quaternion\r\n    this.deltaQuaternion = new THREE.Quaternion\r\n    this.camera = this.el.sceneEl.camera\r\n\r\n    this.firstFrame = true\r\n\r\n    this.cumRotNod = 0\r\n    this.cumRotShake = 0\r\n\r\n    this.debugDisplayCounter = 0\r\n  },\r\n\r\n  update() {\r\n    if (this.data.debug) {\r\n      this.display = document.createElement('a-text')\r\n      this.display.object3D.position.set(0, 0, -3)\r\n      this.display.setAttribute('align', 'center')\r\n      this.display.setAttribute('value', 'Nod/shake debug')\r\n      this.camera.el.appendChild(this.display)\r\n    }\r\n    else {\r\n      if (this.display) {\r\n        this.display.parentNode.removeChild(this.display)\r\n        this.display = null\r\n      }\r\n    }\r\n  },\r\n\r\n  // primes debug display to reset 1 second after changes stop.\r\n  primeDebugReset() {\r\n    this.debugDisplayCounter++\r\n\r\n    setTimeout(() => {\r\n      this.debugDisplayCounter--\r\n      if (this.debugDisplayCounter <= 0) {\r\n        this.display.setAttribute('text', 'value: Nod/shake debug')\r\n      }\r\n    }, 1000)\r\n  },\r\n\r\n  tick() {\r\n\r\n    // avoid false positives at start of day\r\n    if (this.firstFrame) {\r\n      this.firstFrame = false\r\n      return\r\n    }\r\n\r\n    const quaternion = this.cameraQuaternion\r\n    const delta = this.deltaQuaternion\r\n\r\n    this.el.sceneEl.camera.getWorldQuaternion(quaternion);\r\n\r\n    // compute delta quaternion from last frame to this frame\r\n    delta.copy(this.lastQuaternion)\r\n    delta.invert()\r\n    delta.premultiply(quaternion)\r\n\r\n    // Convert to axis and angle as described here.\r\n    // https://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm   \r\n    delta.normalize()\r\n    const s = Math.sqrt(1-delta.w*delta.w)\r\n    if (s < 0.0001) {\r\n      // no significant movement\r\n    }\r\n    else {\r\n\r\n      const angle = 2 * Math.acos(delta.w)\r\n      const absAngle = Math.abs(angle)\r\n      console.log(\"Absolute angle of rotation: \", absAngle)\r\n\r\n      let x = delta.x\r\n      let y = delta.y\r\n      let z = delta.z\r\n\r\n      if (Math.abs(x) >= Math.abs(y) && Math.abs(x) >= Math.abs(z)) {\r\n        // x axis dominant\r\n        this.cumRotNod += absAngle\r\n        this.cumRotShake = 0\r\n        \r\n        if (this.data.debug) {\r\n          console.log(\"X-axis dominant.  Accumulated nod rotation:\", this.cumRotNod)\r\n        }\r\n      }\r\n      else if (Math.abs(y) >= Math.abs(x) && Math.abs(y) >= Math.abs(z)) {\r\n        // y axis dominant\r\n        this.cumRotNod = 0\r\n        this.cumRotShake += absAngle\r\n        \r\n        if (this.data.debug) {\r\n          console.log(\"Y-axis dominant.  Accumulated shake rotation:\", this.cumRotShake)\r\n        }\r\n      }\r\n      else {\r\n        // z-axis dominant\r\n        this.cumRotNod += absAngle\r\n        this.cumRotShake = 0\r\n\r\n        if (this.data.debug) {\r\n          console.log(\"Z-axis dominant.  Accumulated nod rotation:\", this.cumRotNod)\r\n        }\r\n      }\r\n    }\r\n\r\n    // has any cumulative rotation broken threshold?\r\n    if (this.cumRotNod > this.data.nodSensitivity) {\r\n      this.el.emit(\"nod\")\r\n      this.cumRotNod = 0\r\n\r\n      if (this.data.debug) {\r\n        console.log(\"Emitted nod event\")\r\n        this.display.setAttribute('text', 'value: Detected nod')\r\n        this.primeDebugReset()\r\n      }\r\n    }\r\n\r\n    if (this.cumRotShake > this.data.shakeSensitivity) {\r\n      this.el.emit(\"shake\")\r\n      this.cumRotShake = 0\r\n\r\n      if (this.data.debug) {\r\n        console.log(\"Emitted shake event\")\r\n        this.display.setAttribute('text', 'value: Detected shake')\r\n        this.primeDebugReset()\r\n      }\r\n    }\r\n\r\n    // save off this quaternion for analysis next frame\r\n    this.lastQuaternion.copy(quaternion)\r\n  }\r\n})","AFRAME.registerGeometry('squatRack', {\r\n\r\n  schema: {\r\n    schema: {\r\n      width: {default: 1},\r\n      depth: {default: 1},\r\n      frontHeight: {default: 2.2},\r\n      rearHeight: {default: 1.8},\r\n      frameWidth: {default: 0.08},\r\n      hookRadiusSmall: {default: 0.02},\r\n      hookRadiusLarge: {default: 0.04},\r\n      hookDepth: {default: 0.08},\r\n      hookHeight: {default: 1.5},\r\n      safetyHeight: {default: 0.75},\r\n      safetyRadius: {default: 0.02},\r\n    },\r\n  },\r\n\r\n  init(data) {\r\n    const geometries = []\r\n    let geometry\r\n\r\n    // Origin of rack is center of rack, at floor level.\r\n\r\n    // post, back left\r\n    geometry = new THREE.BoxGeometry(data.frameWidth, data.rearHeight, data.frameWidth)\r\n    geometry.translate(-data.width / 2, data.rearHeight / 2, data.depth / 2)\r\n    geometries.push(geometry)\r\n\r\n    // post, back right\r\n    geometry = new THREE.BoxGeometry(data.frameWidth, data.rearHeight, data.frameWidth)\r\n    geometry.translate(data.width / 2, data.rearHeight / 2, data.depth / 2)\r\n    geometries.push(geometry)\r\n\r\n    // post, front left\r\n    geometry = new THREE.BoxGeometry(data.frameWidth, data.frontHeight, data.frameWidth)\r\n    geometry.translate(-data.width / 2, data.frontHeight / 2, -data.depth / 2)\r\n    geometries.push(geometry)\r\n\r\n    // post, back right\r\n    geometry = new THREE.BoxGeometry(data.frameWidth, data.frontHeight, data.frameWidth)\r\n    geometry.translate(data.width / 2, data.frontHeight / 2, -data.depth / 2)\r\n    geometries.push(geometry)\r\n\r\n    // hooks...\r\n    // left hook\r\n    geometry = new THREE.CylinderGeometry(data.hookRadiusSmall,\r\n                                          data.hookRadiusSmall,\r\n                                          data.hookDepth)\r\n    geometry.rotateX(Math.PI/2)\r\n    geometry.translate(-data.width / 2, data.hookHeight, -data.depth / 2 + data.hookDepth / 2)\r\n    geometries.push(geometry)\r\n\r\n    geometry = new THREE.CylinderGeometry(data.hookRadiusLarge,\r\n                                          data.hookRadiusLarge,\r\n                                          0.01)\r\n                                          geometry.rotateX(Math.PI/2)\r\n    geometry.translate(-data.width / 2, data.hookHeight, -data.depth / 2 + data.hookDepth)\r\n    geometries.push(geometry)\r\n\r\n    // right hook\r\n    geometry = new THREE.CylinderGeometry(data.hookRadiusSmall,\r\n                                          data.hookRadiusSmall,\r\n                                          data.hookDepth)\r\n    geometry.rotateX(Math.PI/2)\r\n    geometry.translate(data.width / 2, data.hookHeight, -data.depth / 2 + data.hookDepth / 2)\r\n    geometries.push(geometry)\r\n\r\n    geometry = new THREE.CylinderGeometry(data.hookRadiusLarge,\r\n                                          data.hookRadiusLarge,\r\n                                          0.01)\r\n                                          geometry.rotateX(Math.PI/2)\r\n    geometry.translate(data.width / 2, data.hookHeight, -data.depth / 2 + data.hookDepth)\r\n    geometries.push(geometry)\r\n\r\n    // left safety pin\r\n    geometry = new THREE.CylinderGeometry(data.safetyRadius,\r\n                                          data.safetyRadius,\r\n                                          data.depth)\r\n    geometry.rotateX(Math.PI/2)\r\n    geometry.translate(-data.width / 2, data.safetyHeight, 0)\r\n    geometries.push(geometry)\r\n\r\n    // right safety pin\r\n    geometry = new THREE.CylinderGeometry(data.safetyRadius,\r\n                                          data.safetyRadius,\r\n                                          data.depth)\r\n    geometry.rotateX(Math.PI/2)\r\n    geometry.translate(data.width / 2, data.safetyHeight, 0)\r\n    geometries.push(geometry)\r\n\r\n    this.geometry = THREE.BufferGeometryUtils.mergeBufferGeometries(geometries);\r\n  }\r\n\r\n})\r\n\r\nAFRAME.registerComponent('squat-rack', {\r\n\r\n  schema: {\r\n    width: {default: 1},\r\n    depth: {default: 1},\r\n    frontHeight: {default: 2.2},\r\n    rearHeight: {default: 1.8},\r\n    frameWidth: {default: 0.08},\r\n    hookRadiusSmall: {default: 0.02},\r\n    hookRadiusLarge: {default: 0.04},\r\n    hookDepth: {default: 0.08},\r\n    hookHeight: {default: 1.4},\r\n    safetyHeight: {default: 0.65},\r\n    safetyRadius: {default: 0.02},\r\n  },\r\n\r\n  init() {\r\n\r\n    this.el.setAttribute('geometry', {primitive: 'squatRack', \r\n                                      width: this.data.width,\r\n                                      depth: this.data.depth,\r\n                                      frontHeight: this.data.frontHeight,\r\n                                      rearHeight: this.data.rearHeight,\r\n                                      frameWidth: this.data.frameWidth,\r\n                                      hookRadiusSmall: this.data.hookRadiusSmall,\r\n                                      hookRadiusLarge: this.data.hookRadiusLarge,\r\n                                      hookDepth: this.data.hookDepth,\r\n                                      hookHeight: this.data.hookHeight,\r\n                                      safetyHeight: this.data.safetyHeight,\r\n                                      safetyRadius: this.data.safetyRadius})\r\n\r\n    this.el.setAttribute('material', {color: '#333'})\r\n  }\r\n})","// Top-level UI component that manages visibility of other UIs\r\nAFRAME.registerComponent('ui-manager', {\r\n\r\n  init() {\r\n    this.state = {\r\n      calibrated: false,\r\n      inRack: false,\r\n    }\r\n\r\n    this.calibrationComplete = this.calibrationComplete.bind(this)\r\n    this.enteredRack = this.enteredRack.bind(this)\r\n    this.exitedRack = this.exitedRack.bind(this)\r\n    this.el.addEventListener('calibration-complete', this.calibrationComplete)\r\n    this.el.addEventListener('entered-rack', this.enteredRack);\r\n    this.el.addEventListener('exited-rack', this.exitedRack);\r\n\r\n\r\n    this.calibrationUI = document.getElementById('calibration-ui')\r\n    this.insideRackUI = document.getElementById('inside-rack-ui')\r\n    this.outsideRackUI = document.getElementById('outside-rack-ui')\r\n\r\n    this.updateUIs()\r\n  },\r\n\r\n  calibrationComplete() {\r\n    this.state.calibrated = true\r\n    this.updateUIs()\r\n  },\r\n\r\n  enteredRack() {\r\n    this.state.inRack = true\r\n    this.updateUIs()\r\n  },\r\n\r\n  exitedRack() {\r\n    this.state.inRack = false\r\n    this.updateUIs()\r\n  },\r\n\r\n  updateUIs() {\r\n\r\n    updateVisibility = (el, visible) => {\r\n      if (el && el.object3D) {\r\n        el.object3D.visible = visible\r\n      }\r\n    }\r\n\r\n    if (this.state.calibrated) {\r\n\r\n      if (this.state.inRack) {\r\n        updateVisibility(this.calibrationUI, false)\r\n        updateVisibility(this.insideRackUI, true)\r\n        updateVisibility(this.outsideRackUI, false)\r\n      }\r\n      else {\r\n        updateVisibility(this.calibrationUI, false)\r\n        updateVisibility(this.insideRackUI, false)\r\n        updateVisibility(this.outsideRackUI, true)\r\n      }\r\n    }\r\n    else {\r\n      updateVisibility(this.calibrationUI, true)\r\n      updateVisibility(this.insideRackUI, false)\r\n      updateVisibility(this.outsideRackUI, false)\r\n    }\r\n  }\r\n})","// Configure on scene.\r\n\r\n// Updates UI component(s) to display rep status\r\n\r\nAFRAME.registerComponent('ui-updater', {\r\n\r\n  init() {\r\n\r\n    this.reachedHooks = this.reachedHooks.bind(this)\r\n    this.leftHooks = this.leftHooks.bind(this)\r\n    this.shoulderedBar = this.shoulderedBar.bind(this)\r\n    this.returnedBar = this.returnedBar.bind(this)\r\n    this.hitTop = this.hitTop.bind(this)\r\n    this.loweredFromTop = this.loweredFromTop.bind(this)\r\n    this.hitTargetDepth = this.hitTargetDepth.bind(this)\r\n    this.upwardsFromTargetDepth = this.upwardsFromTargetDepth.bind(this)\r\n    this.belowSafetyPins = this.belowSafetyPins.bind(this)\r\n    this.bailedOut = this.bailedOut.bind(this)\r\n\r\n    this.el.addEventListener('reached-hooks', this.reachedHooks);\r\n    this.el.addEventListener('left-hooks', this.leftHooks);\r\n    this.el.addEventListener('shouldered-bar', this.shoulderedBar);\r\n    this.el.addEventListener('returned-bar', this.returnedBar);\r\n    this.el.addEventListener('hit-top', this.hitTop);\r\n    this.el.addEventListener('lowered-from-top', this.loweredFromTop);\r\n    this.el.addEventListener('hit-target-depth', this.hitTargetDepth);\r\n    this.el.addEventListener('upwards-from-target-depth', this.upwardsFromTargetDepth);\r\n    this.el.addEventListener('below-safety-pins', this.belowSafetyPins);\r\n    this.el.addEventListener('bailed-out', this.bailedOut);\r\n\r\n    this.state = {\r\n      repPhase: 'none',  // one of: none, ready, down, up, rest\r\n      repsToGo: 5\r\n    }\r\n\r\n    this.insideRackUI = document.querySelector('#inside-rack-ui')\r\n    this.outsideRackUI = document.querySelector('#outside-rack-ui')\r\n\r\n  },\r\n\r\n  remove() {\r\n    this.el.removeEventListener('reached-hooks', this.reachedHooks);\r\n    this.el.removeEventListener('left-hooks', this.leftHooks);\r\n    this.el.removeEventListener('shouldered-bar', this.shoulderedBar);\r\n    this.el.removeEventListener('returned-bar', this.returnedBar);\r\n    this.el.removeEventListener('hit-top', this.hitTop);\r\n    this.el.removeEventListener('lowered-from-top', this.loweredFromTop);\r\n    this.el.removeEventListener('hit-target-depth', this.hitTargetDepth);\r\n    this.el.removeEventListener('upwards-from-target-depth', this.upwardsFromTargetDepth);\r\n    this.el.removeEventListener('below-safety-pins', this.belowSafetyPins);\r\n    this.el.removeEventListener('bailed-out', this.bailedOut);\r\n  },\r\n\r\n  setTargetReps(repCount) {\r\n\r\n    this.state.repsToGo = repCount\r\n    this.insideRackUI.setAttribute('inside-rack-ui', {repsToGo: this.state.repsToGo})\r\n  },\r\n\r\n  repCompleted() {\r\n\r\n    this.state.repsToGo--\r\n    this.insideRackUI.setAttribute('inside-rack-ui', {repsToGo: this.state.repsToGo})\r\n  },\r\n\r\n  reachedHooks() {\r\n\r\n    this.setMessage('Take weight of bar')\r\n  },\r\n\r\n  leftHooks() {\r\n    // no update needed\r\n  },\r\n\r\n  shoulderedBar() {\r\n    this.setMessage('Step Back')\r\n  },\r\n\r\n  returnedBar() {\r\n    this.setMessage('Finished!')\r\n  },\r\n\r\n  setMessage(message) {\r\n    this.insideRackUI.setAttribute('inside-rack-ui', {message: message})\r\n  },\r\n\r\n  hitTop() {\r\n\r\n    // one of: none, ready, down, up, rest\r\n    switch (this.state.repPhase) {\r\n\r\n      case 'none':\r\n        this.state.repPhase = 'ready'\r\n        this.setMessage('Ready!')\r\n        break\r\n\r\n      case 'down':\r\n        this.state.repPhase = 'rest'\r\n        this.setMessage('Incomplete Rep')\r\n        break\r\n\r\n      case 'up':\r\n        this.state.repPhase = 'rest'\r\n        this.setMessage('Rep Complete')\r\n        this.repCompleted()\r\n        break\r\n\r\n      default: \r\n        console.error(\"Hit Top in unexpected state: \", this.state.repPhase)\r\n    }\r\n  },\r\n\r\n  loweredFromTop() {\r\n\r\n    // one of: none, ready, down, up, rest\r\n    switch (this.state.repPhase) {\r\n\r\n      case 'none':\r\n        this.setMessage('Stand Taller before beginning reps')\r\n        break\r\n\r\n      case 'ready':\r\n      case 'rest':\r\n        this.state.repPhase = 'down'\r\n        this.setMessage('Going down...')\r\n        break\r\n\r\n      case 'up':\r\n        this.setMessage('Stand at full height to complete last Rep!')\r\n        break\r\n\r\n      default: \r\n        console.error(\"Lowered From Top in unexpected state: \", this.state.repPhase)\r\n    }\r\n\r\n  },\r\n\r\n  hitTargetDepth() {\r\n\r\n    // one of: none, ready, down, up, rest\r\n    switch (this.state.repPhase) {\r\n\r\n      case 'none':\r\n        this.setMessage('Stand at full height before beginning reps')\r\n        break\r\n\r\n      case 'down':\r\n        this.setMessage('Hit Depth!')\r\n        this.state.repPhase = 'up'\r\n        break\r\n  \r\n      case 'up':\r\n        this.setMessage('Push up to complete this rep!')\r\n        break\r\n\r\n      default: \r\n        console.error(\"Lowered From Top in unexpected state: \", this.state.repPhase)\r\n    }\r\n  },\r\n\r\n  upwardsFromTargetDepth() {\r\n\r\n    // one of: none, ready, down, up, rest\r\n    switch (this.state.repPhase) {\r\n\r\n      case 'up':\r\n        // expected.  No action / state change needed\r\n        break\r\n\r\n      default: \r\n        console.error(\"Lowered From Top in unexpected state: \", this.state.repPhase)\r\n    }\r\n  },\r\n\r\n  belowSafetyPins() {\r\n\r\n    this.setMessage('Failed set.  Step out of rack and remove weight plates from bar.')\r\n\r\n  },\r\n\r\n  bailedOut() {\r\n    this.setMessage('Failed set.  Step out of rack and remove weight plates from bar.')\r\n  }\r\n})\r\n","AFRAME.registerComponent('vertical-controls', {\r\n\r\n  init() {\r\n\r\n    this.verticalVelocity = 0\r\n    this.verticalAcceleration = 0\r\n\r\n    this.keyDown = this.keyDown.bind(this)\r\n    this.keyUp = this.keyUp.bind(this)\r\n\r\n    window.addEventListener('keydown', this.keyDown)\r\n    window.addEventListener('keyup', this.keyUp)\r\n  },\r\n\r\n  keyDown(e) {\r\n\r\n    if (e.key === \"o\") {\r\n      this.verticalAcceleration += 2\r\n    }\r\n\r\n    if (e.key === \"k\") {\r\n      this.verticalAcceleration = -2\r\n    }\r\n  },\r\n\r\n  keyUp(e) {\r\n    \r\n    if (e.key === \"o\" || e.key === \"k\") {\r\n      this.verticalVelocity = 0\r\n      this.verticalAcceleration = 0\r\n    }\r\n  },\r\n\r\n  tick(t, dt) {\r\n\r\n    velDelta = dt * this.verticalAcceleration / 1000\r\n    this.verticalVelocity += velDelta\r\n    if (this.verticalVelocity > 1) this.verticalVelocity = 1\r\n    if (this.verticalVelocity < -1) this.verticalVelocity = -1\r\n\r\n    yDelta = dt * this.verticalVelocity / 1000\r\n    this.el.object3D.position.y += yDelta\r\n  }\r\n})","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/* global AFRAME, THREE */\r\n\r\nrequire('./src/bar-position.js')\r\nrequire('./src/bar-monitor.js')\r\nrequire('./src/in-rack-ui.js')\r\nrequire('./src/ui-updater.js')\r\nrequire('./src/squat-rack.js')\r\nrequire('./src/vertical-controls.js')\r\nrequire('./src/nod-shake.js')\r\nrequire('./src/calibration-flow')\r\nrequire('./src/ui-manager')\r\nrequire('aframe-polygon-wireframe')"],"names":["root","factory","exports","module","define","amd","a","i","self","AFRAME","registerComponent","schema","color","type","default","opacity","hiddenOpacity","dashed","dashSize","gapSize","dashScale","init","this","updateGeometry","bind","el","addEventListener","getObject3D","baseGeometry","geometry","edges","dispose","THREE","EdgesGeometry","update","oldMaterial","material","oldLine","line","oldHiddenMaterial","hiddenMaterial","oldHiddenLine","hiddenLine","data","createLineMaterial","console","warn","depthWrite","depthTest","toneMapped","LineSegments","computeLineDistances","object3D","add","visible","removeLineAndMaterial","removeFromParent","LineDashedMaterial","scale","LineBasicMaterial","transparent","remove","removeEventListener","dependencies","hookPosition","x","y","z","topHeight","targetDepth","safetyPinHeight","rackWidth","rackDepth","showPlanes","state","insideRack","lifterAtHooks","barOnShoulders","atTop","belowDepth","belowSafetyPins","deletePlanes","createPlanes","aboveTopPlane","createPlane","topPlaneUpwards","depthPlaneUpwards","safetyPlaneTop","safetyPlaneBottom","deletePlane","plane","parentNode","removeChild","topPlaneDownwards","depthPlaneDownwards","height","style","side","document","createElement","setAttribute","position","rotation","Math","PI","assert","querySelector","appendChild","isInsideRack","barPosition","insideLR","insideFB","abs","zOffset","checkIfInsideRack","emit","isAtHooks","atHooksLR","atHooksFB","checkIfAtHooks","isAtTop","checkIfAtTop","isBelowDepth","checkIfBelowDepth","isBelowSafetyPins","checkIfBelowSafetyPins","tick","sceneEl","components","cameraPosition","Vector3","cameraQuaternion","Quaternion","tempQuaternion","rackEl","rack","rackInverseTransform","Matrix4","updateWorldMatrix","copy","matrixWorld","invert","barOffset","getCameraAndBarPosition","quaternion","camera","getWorldPosition","getWorldQuaternion","applyMatrix4","setFromRotationMatrix","multiply","addVectors","calibrationUIImages","start","bar","hooks","top","depth","safety","review","done","nodEvent","shakeEvent","reachedHooks","stage","saving","deleting","calibrationUI","getElementById","updateUI","beginCalibrationProcess","endCalibrationProcess","getBarPosition","moveToStage","setTimeout","moveBackToStage","pos","ypos","error","imageSelector","circle","createImage","src","image","deleteImage","repsToGo","message","text","wrapCount","align","nodSensitivity","shakeSensitivity","debug","lastQuaternion","deltaQuaternion","firstFrame","cumRotNod","cumRotShake","debugDisplayCounter","display","set","primeDebugReset","delta","premultiply","normalize","sqrt","w","angle","acos","absAngle","log","registerGeometry","width","frontHeight","rearHeight","frameWidth","hookRadiusSmall","hookRadiusLarge","hookDepth","hookHeight","safetyHeight","safetyRadius","geometries","BoxGeometry","translate","push","CylinderGeometry","rotateX","BufferGeometryUtils","mergeBufferGeometries","primitive","calibrated","inRack","calibrationComplete","enteredRack","exitedRack","insideRackUI","outsideRackUI","updateUIs","updateVisibility","leftHooks","shoulderedBar","returnedBar","hitTop","loweredFromTop","hitTargetDepth","upwardsFromTargetDepth","bailedOut","repPhase","setTargetReps","repCount","repCompleted","setMessage","verticalVelocity","verticalAcceleration","keyDown","keyUp","window","e","key","t","dt","velDelta","yDelta","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__"],"sourceRoot":""}