!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}(self,(()=>(()=>{var t={12:()=>{AFRAME.registerComponent("polygon-wireframe",{schema:{color:{type:"color",default:"grey"},opacity:{type:"number",default:1},hiddenOpacity:{type:"number",default:0},dashed:{type:"boolean",default:!1},dashSize:{type:"number",default:3},gapSize:{type:"number",default:1},dashScale:{type:"number",default:30}},init(){this.updateGeometry=this.updateGeometry.bind(this),this.el.addEventListener("object3dset",this.updateGeometry),this.el.getObject3D("mesh")&&this.updateGeometry()},updateGeometry(){const t=this.el.getObject3D("mesh").geometry;t&&(this.edges&&this.edges.dispose(),this.edges=new THREE.EdgesGeometry(t),this.update())},update(){const t=this.material,e=this.line,i=this.hiddenMaterial,s=this.hiddenLine,a=this.data;if(this.material=this.createLineMaterial(a.color,a.opacity),0!==a.hiddenOpacity&&a.hiddenOpacity!==a.opacity?(this.hiddenMaterial=this.createLineMaterial(a.color,a.hiddenOpacity),a.hiddenOpacity>a.opacity&&(console.warn("Opacity of hidden parts cannot be higher than the opacity of non-hidden parts"),console.warn("Wireframe will be rendered with opacity ",a.hiddenOpacity," as set on hiddenOpacity property."))):this.hiddenMaterial=null,0!==a.hiddenOpacity){const t=this.hiddenMaterial||this.material;t.depthWrite=!1,t.depthTest=!1,t.toneMapped=!1}this.line=new THREE.LineSegments(this.edges,this.material),this.line.computeLineDistances(),this.el.object3D.add(this.line),this.hiddenMaterial&&(this.hiddenLine=new THREE.LineSegments(this.edges,this.hiddenMaterial),this.hiddenLine.computeLineDistances(),this.el.object3D.add(this.hiddenLine)),this.el.getObject3D("mesh").visible=!1,this.removeLineAndMaterial(e,t),this.removeLineAndMaterial(s,i)},removeLineAndMaterial(t,e){t&&t.removeFromParent(),e&&e.dispose()},createLineMaterial(t,e){const i=this.data;let s;return s=i.dashed?new THREE.LineDashedMaterial({color:t,dashSize:i.dashSize,gapSize:i.gapSize,scale:i.dashScale}):new THREE.LineBasicMaterial({color:t}),s.opacity=e,1!==e&&(s.transparent=!0),s},remove(){this.el.removeEventListener("object3dset",this.updateGeometry),this.el.getObject3D("mesh").visible=!0,this.edges&&this.edges.dispose(),this.removeLineAndMaterial(this.line,this.material)}})},693:()=>{AFRAME.registerComponent("bar-monitor",{dependencies:["bar-position"],schema:{hookPosition:{type:"vec3",default:{x:0,y:1.5,z:-.5}},topHeight:{default:0},targetDepth:{default:0},safetyPinHeight:{default:0},rackWidth:{default:1},rackDepth:{default:1},showPlanes:{default:!0},opacity:{default:.3}},init(){this.state={insideRack:!1,lifterAtHooks:!1,barOnShoulders:!1,atTop:!1,belowDepth:!1,belowSafetyPins:!1}},update(){this.deletePlanes(),this.data.showPlanes&&this.createPlanes()},createPlanes(){this.topPlaneUpwards=this.createPlane(this.data.topHeight-.05,"green"),this.depthPlaneUpwards=this.createPlane(this.data.targetDepth,"green"),this.safetyPlaneTop=this.createPlane(this.data.safetyPinHeight,"orange"),this.safetyPlaneBottom=this.createPlane(this.data.safetyPinHeight-.05,"red")},deletePlanes(){deletePlane=t=>{t&&t.parentNode.removeChild(t)},deletePlane(this.aboveTopPlane),deletePlane(this.topPlaneUpwards),deletePlane(this.depthPlaneUpwards),deletePlane(this.safetyPlaneTop),deletePlane(this.safetyPlaneBottom),this.aboveTopPlane=null,this.aboveTopPlane=null,this.topPlaneUpwards=null,this.depthPlaneUpwards=null,this.safetyPlaneTop=null,this.safetyPlaneBottom=null},createPlane(t,e){const i=document.createElement("a-entity");return i.setAttribute("plane-visualization",{height:t,color:e}),document.querySelector("#rack").appendChild(i),i},isInsideRack(t){let e,i;Math.abs(t.x-this.data.hookPosition.x)<this.data.rackWidth/2&&(e=!0);const s=t.z-this.data.hookPosition.z;return s<this.data.rackDepth&&s>-.1&&(i=!0),e&&i},checkIfInsideRack(t){return this.isInsideRack(t)?(this.state.insideRack||this.el.emit("entered-rack"),this.state.insideRack=!0):(this.state.insideRack&&this.el.emit("exited-rack"),this.state.insideRack=!1),this.state.insideRack},isAtHooks(t){let e,i;return Math.abs(t.x-this.data.hookPosition.x)<this.data.rackWidth/2&&(e=!0),Math.abs(this.data.hookPosition.z-t.z)<.05&&(i=!0),e&&i},checkIfAtHooks(t){return this.isAtHooks(t)?(this.state.lifterAtHooks||this.el.emit("reached-hooks"),this.state.lifterAtHooks=!0):(this.state.lifterAtHooks&&(t.y>this.data.hookPosition.y?(this.state.barOnShoulders||this.el.emit("shouldered-bar"),this.state.barOnShoulders=!0):(this.state.barOnShoulders&&this.el.emit("returned-bar"),this.state.barOnShoulders=!1),this.el.emit("left-hooks")),this.state.lifterAtHooks=!1),this.state.lifterAtHooks},isAtTop(t){return this.data.topHeight-t.y<.05},checkIfAtTop(t){return this.isAtTop(t)?(this.state.atTop||this.el.emit("hit-top"),this.state.atTop=!0):(this.state.atTop&&this.el.emit("lowered-from-top"),this.state.atTop=!1),this.state.atTop},isBelowDepth(t){return t.y<this.data.targetDepth},checkIfBelowDepth(t){return this.isBelowDepth(t)?(this.state.belowDepth||this.el.emit("hit-target-depth"),this.state.belowDepth=!0):(this.state.belowDepth&&this.el.emit("upwards-from-target-depth"),this.state.belowDepth=!1),this.state.belowDepth},isBelowSafetyPins(t){return t.y<this.data.safetyPinHeight-.05},checkIfBelowSafetyPins(t){return this.isBelowSafetyPins(t)?(this.state.belowSafetyPins||this.el.emit("below-safety-pins"),this.state.belowSafetyPins=!0):(this.state.belowSafetyPins&&(this.el.emit("bailed-out"),this.state.barOnShoulders=!1),this.state.belowSafetyPins=!1),this.state.belowSafetyPins},tick(){barPosition=this.el.sceneEl.components["bar-position"].barPosition,this.checkIfInsideRack(barPosition)&&(this.checkIfAtHooks(barPosition),this.checkIfAtTop(barPosition),this.checkIfBelowDepth(barPosition),this.checkIfBelowSafetyPins(barPosition))}}),AFRAME.registerComponent("plane-visualization",{schema:{height:{default:0},color:{default:"red"}},init(){const{height:t,color:e}=this.data;this.createRing(t,e,.4,1),this.createRing(t,e,.8,.6),this.createRing(t,e,1.2,.2)},createRing(t,e,i,s){const a=document.createElement("a-torus");return a.object3D.rotation.x=Math.PI/2,a.object3D.position.y=t,a.setAttribute("radius",i),a.setAttribute("radius-tubular",.001),a.setAttribute("segments-tubular",128),a.setAttribute("material",{color:e,opacity:s,transparent:s<1}),this.el.appendChild(a),a}})},610:()=>{AFRAME.registerComponent("bar-position",{init(){this.cameraPosition=new THREE.Vector3,this.cameraQuaternion=new THREE.Quaternion,this.tempQuaternion=new THREE.Quaternion,this.rackEl=document.querySelector("#rack"),rack=this.rackEl.object3D,this.rackInverseTransform=new THREE.Matrix4,rack.updateWorldMatrix(),this.rackInverseTransform.copy(rack.matrixWorld),this.rackInverseTransform.invert(),this.barPosition=new THREE.Vector3,this.barOffset=new THREE.Vector3,this.getCameraAndBarPosition()},getCameraAndBarPosition(){const t=this.cameraPosition,e=this.cameraQuaternion;this.el.sceneEl.camera.getWorldPosition(t),this.el.sceneEl.camera.getWorldQuaternion(e);const i=this.rackInverseTransform;t.applyMatrix4(i),this.tempQuaternion.setFromRotationMatrix(i),e.multiply(this.tempQuaternion),this.barPosition.addVectors(this.cameraPosition,this.barOffset)},update(){},tick(){this.getCameraAndBarPosition()}})},880:()=>{const t={start:"#calibration0",bar:"#calibration1",hooks:"#calibration2",top:"#calibration3",depth:"#calibration4",safety:"#calibration5",review:"#calibration6",done:"#calibration7"},e={start:"#sound1",bar:"#sound4",hooks:"#sound5",top:"#sound7",depth:"#sound8",safety:"#sound9",review:"#sound10",done:"#sound11"},i={start:"#sound2",hooks:"#sound6",top:"#sound6",depth:"#sound6",safety:"#sound6",done:"#sound12"},s={start:"#sound3"};AFRAME.registerComponent("calibration-flow",{dependencies:["bar-position"],schema:{skip:{default:!1}},init(){this.reachedHooks=this.reachedHooks.bind(this),this.forwardEvent=this.forwardEvent.bind(this),this.backEvent=this.backEvent.bind(this),this.el.addEventListener("click-forward",this.forwardEvent),this.el.addEventListener("click-back",this.backEvent),this.el.addEventListener("reached-hooks",this.reachedHooks),this.stage="start",this.calibrationUI=document.getElementById("calibration-ui"),this.cameraWorldPosition=new THREE.Vector3,this.cameraWorldQuaternion=new THREE.Quaternion,this.forwardVector=new THREE.Vector3(0,0,-1),this.directionVector=new THREE.Vector3,this.el.addEventListener("enter-vr",(()=>{this.playSFX("#sfx-welcome"),setTimeout((()=>this.playPrompt(this.stage)),5e3);const t=document.querySelector("#video1");t&&t.play()})),this.data.skip&&(this.el.setAttribute("bar-monitor","topHeight: 1.6;\n                             targetDepth: 0.9;\n                             safetyPinHeight: 0.75"),this.endCalibrationProcess())},update(){this.updateUI()},remove(){this.el.removeEventListener("click-forward",this.forwardEvent),this.el.removeEventListener("click-back",this.backEvent)},beginCalibrationProcess(){this.stage="start",this.calibrationUI.object3D.visible=!0,this.updateUI()},endCalibrationProcess(){this.calibrationUI.object3D.visible=!1,this.el.emit("calibration-complete")},getBarPosition(){return this.el.components["bar-position"].barPosition},moveToStage(t){this.playPrompt(t),this.stage=t,this.updateUI()},moveBackToStage(t){this.playPrompt(t),this.stage=t,this.updateUI()},playPrompt(t){const a=document.getElementById("sound-origin");a.setAttribute("sound",{src:e[t],autoplay:!0}),i[t]&&setTimeout((()=>{a.setAttribute("sound",{src:i[t],autoplay:!0}),a.components.sound.playSound()}),2e3),s[t]&&setTimeout((()=>{a.setAttribute("sound",{src:s[t],autoplay:!0}),a.components.sound.playSound()}),4e3)},playSFX(t){document.getElementById("sfx-origin").setAttribute("sound",{src:t,autoplay:!0})},reachedHooks(){"review"===this.stage&&this.moveToStage("done")},forwardEvent(){switch(this.stage){case"start":const t=document.querySelector("#rack"),e=this.cameraWorldPosition,i=this.cameraWorldQuaternion;this.el.sceneEl.camera.getWorldPosition(e),this.el.sceneEl.camera.getWorldQuaternion(i),t.object3D.position.x=e.x,t.object3D.position.y=0,t.object3D.position.z=e.z;const s=this.forwardVector,a=this.directionVector;a.copy(s),a.applyQuaternion(i),a.y=0,a.normalize(),t.object3D.quaternion.setFromUnitVectors(s,a),this.moveToStage("bar");break;case"bar":this.moveToStage("hooks");break;case"hooks":const r=new THREE.Vector3;r.copy(this.getBarPosition()),this.el.setAttribute("bar-monitor",{hookPosition:r}),this.moveToStage("top");break;case"top":ypos=this.getBarPosition().y,this.el.setAttribute("bar-monitor",{topHeight:ypos}),this.moveToStage("depth");break;case"depth":ypos=this.getBarPosition().y,this.el.setAttribute("bar-monitor",{targetDepth:ypos}),this.moveToStage("safety");break;case"safety":ypos=this.getBarPosition().y,this.el.setAttribute("bar-monitor",{safetyPinHeight:ypos}),this.moveToStage("review");break;case"review":break;case"done":this.endCalibrationProcess();break;default:console.error("Hit Forward in unexpected state: ",this.stage)}},backEvent(){switch(this.stage){case"start":break;case"bar":this.moveBackToStage("start");break;case"hooks":this.moveBackToStage("bar");break;case"top":this.moveBackToStage("hooks");break;case"depth":this.moveBackToStage("top");break;case"safety":this.moveBackToStage("depth");break;case"review":this.moveBackToStage("safety");break;case"done":this.moveBackToStage("review");break;default:console.error("Hit Back in unexpected state: ",this.stage)}},updateUI(){const e="review"!==this.stage,i="start"!==this.stage;this.calibrationUI.setAttribute("calibration-ui",{saving:this.saving,deleting:this.deleting,forwardButton:e,backButton:i,imageSelector:t[this.stage]})}}),AFRAME.registerComponent("calibration-ui",{schema:{imageSelector:{type:"string"},fowardButton:{default:!1},backButton:{default:!1}},init(){this.circle=document.createElement("a-entity"),this.circle.setAttribute("geometry","primitive: circle; radius: 1; segments: 128"),this.circle.setAttribute("material","color: white; opacity: 0.8; transparent: true"),this.el.appendChild(this.circle)},update(){this.deleteImage(),this.data.imageSelector&&this.createImage(this.circle,this.data.imageSelector,2),this.deleteButtons(),this.createButtons()},createButtons(){this.data.forwardButton&&!this.data.backButton&&(this.forwardButton=this.createButton(0,-1,"#check","click-forward")),!this.data.forwardButton&&this.data.backButton&&(this.backButton=this.createButton(0,-1,"#cross","click-back")),this.data.forwardButton&&this.data.backButton&&(this.forwardButton=this.createButton(.4,-1,"#check","click-forward"),this.backButton=this.createButton(-.4,-1,"#cross","click-back"))},createButton(t,e,i,s){return button=document.createElement("a-entity"),button.object3D.position.x=t,button.object3D.position.y=e,button.object3D.position.z=.001,button.setAttribute("animated-button",{imageSrc:i,eventName:s}),this.circle.appendChild(button),button},deleteButtons(){deleteButton=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},deleteButton(this.forwardButton),deleteButton(this.backButton),this.forwardButton=null,this.backButton=null},createImage(t,e,i){this.image=document.createElement("a-image"),this.image.setAttribute("alpha-test",.1),this.image.setAttribute("width",i),this.image.setAttribute("height",i),this.image.setAttribute("transparent",!0),this.image.object3D.position.z=.001,this.image.setAttribute("src",e),t.appendChild(this.image)},deleteImage(){this.image&&(this.image.parentNode.removeChild(this.image),this.image=null)}}),AFRAME.registerComponent("animated-button",{schema:{imageSrc:{type:"string"},eventName:{type:"string"}},init(){const t=document.createElement("a-entity");t.setAttribute("geometry","primitive: circle; radius: 0.28; segments: 128"),t.setAttribute("material","color: white; opacity: 0.8; transparent: true; shader: flat"),t.classList.add("clickable"),this.el.appendChild(t);const e=document.createElement("a-ring");e.setAttribute("radius-inner",.28),e.setAttribute("radius-outer",.29),e.setAttribute("segments-theta",128),e.setAttribute("segments-phi",1),e.setAttribute("material","color: grey; shader: flat"),e.object3D.position.z=.001,t.appendChild(e),this.createImage(t,this.data.imageSrc,.3);const i=document.createElement("a-ring");i.setAttribute("radius-inner",.25),i.setAttribute("radius-outer",.32),i.setAttribute("segments-theta",128),i.setAttribute("segments-phi",1),i.setAttribute("theta-start",90),i.setAttribute("theta-length",0),i.setAttribute("scale","-1 1 1"),i.setAttribute("material","color: grey; shader: flat"),i.object3D.position.z=.001,e.appendChild(i),t.addEventListener("fusing",(()=>{i.setAttribute("animation",{property:"geometry.thetaLength",from:0,to:360,dur:1e3,easing:"linear"})})),t.addEventListener("mouseleave",(()=>{i.removeAttribute("animation"),i.setAttribute("geometry","thetaLength: 0")})),t.addEventListener("click",(()=>{this.el.sceneEl.emit(this.data.eventName)}))},createImage(t,e,i){this.image=document.createElement("a-image"),this.image.setAttribute("alpha-test",.1),this.image.setAttribute("width",i),this.image.setAttribute("height",i),this.image.setAttribute("transparent",!0),this.image.object3D.position.z=.001,this.image.setAttribute("src",e),t.appendChild(this.image)}})},297:()=>{AFRAME.registerComponent("inside-rack-ui",{schema:{totalReps:{default:5},repsToGo:{default:5},width:{default:4},message:{default:""}},init(){this.reps=[];for(let t=0;t<this.data.totalReps;t++){const e=document.createElement("a-entity");e.setAttribute("rep-report",{repNumber:t});const i=this.data.totalReps;e.object3D.position.x=(t-(i-1)/2)*(this.data.width/this.data.totalReps),this.el.appendChild(e),this.reps.push(e)}this.repReport=this.repReport.bind(this),this.el.sceneEl.addEventListener("rep-report",this.repReport)},repReport(t){const e=t.detail,{repNumber:i}=e,s=this.reps[i];s&&s.setAttribute("rep-report",{repNumber:i,status:e.completed?"done":"failed",restPrior:e.restPrior,timeDown:e.timeDown,depth:e.depth,timeUp:e.timeUp,turnSPeed:e.turnSpeed,daviationLR:e.deviationLR,deviationFB:e.deviationFB})}}),AFRAME.registerComponent("rep-report",{schema:{repNumber:{type:"number"},status:{type:"string",default:"todo"},timeDown:{type:"number"},depth:{type:"number"},timeUp:{type:"number"},turnSpeed:{type:"number"},deviationLR:{type:"number"},deviationFB:{type:"number"}},init(){this.circle=document.createElement("a-circle"),this.circle.setAttribute("radius",.3),this.circle.setAttribute("material",{opacity:.8,transparent:!0}),this.circle.object3D.position.y=.5,this.el.appendChild(this.circle),this.number=document.createElement("a-entity"),this.number.setAttribute("text",{color:"black",wrapCount:5,value:this.data.repNumber+1,align:"center"}),this.circle.appendChild(this.number)},update(){let t;this.deleteImage();const e=this.data.status;"done"===e&&(t="#check"),"failed"===e&&(t="#cross"),t&&this.createImage(this.circle,t,.4),this.number.object3D.visible="todo"===e||"doing"===e},createImage(t,e,i){this.image=document.createElement("a-image"),this.image.setAttribute("alpha-test",.1),this.image.setAttribute("width",i),this.image.setAttribute("height",i),this.image.setAttribute("transparent",!0),this.image.object3D.position.z=.001,this.image.setAttribute("src",e),t.appendChild(this.image)},deleteImage(){this.image&&(this.image.parentNode.removeChild(this.image),this.image=null)}})},211:()=>{AFRAME.registerGeometry("squatRack",{schema:{schema:{width:{default:1},depth:{default:1},frontHeight:{default:2.2},rearHeight:{default:1.8},frameWidth:{default:.08},hookRadiusSmall:{default:.02},hookRadiusLarge:{default:.04},hookDepth:{default:.08},hookHeight:{default:1.5},safetyHeight:{default:.75},safetyRadius:{default:.02}}},init(t){const e=[];let i;i=new THREE.BoxGeometry(t.frameWidth,t.rearHeight,t.frameWidth),i.translate(-t.width/2,t.rearHeight/2,t.depth/2),e.push(i),i=new THREE.BoxGeometry(t.frameWidth,t.rearHeight,t.frameWidth),i.translate(t.width/2,t.rearHeight/2,t.depth/2),e.push(i),i=new THREE.BoxGeometry(t.frameWidth,t.frontHeight,t.frameWidth),i.translate(-t.width/2,t.frontHeight/2,-t.depth/2),e.push(i),i=new THREE.BoxGeometry(t.frameWidth,t.frontHeight,t.frameWidth),i.translate(t.width/2,t.frontHeight/2,-t.depth/2),e.push(i),i=new THREE.CylinderGeometry(t.hookRadiusSmall,t.hookRadiusSmall,t.hookDepth),i.rotateX(Math.PI/2),i.translate(-t.width/2,t.hookHeight,-t.depth/2+t.hookDepth/2),e.push(i),i=new THREE.CylinderGeometry(t.hookRadiusLarge,t.hookRadiusLarge,.01),i.rotateX(Math.PI/2),i.translate(-t.width/2,t.hookHeight,-t.depth/2+t.hookDepth),e.push(i),i=new THREE.CylinderGeometry(t.hookRadiusSmall,t.hookRadiusSmall,t.hookDepth),i.rotateX(Math.PI/2),i.translate(t.width/2,t.hookHeight,-t.depth/2+t.hookDepth/2),e.push(i),i=new THREE.CylinderGeometry(t.hookRadiusLarge,t.hookRadiusLarge,.01),i.rotateX(Math.PI/2),i.translate(t.width/2,t.hookHeight,-t.depth/2+t.hookDepth),e.push(i),i=new THREE.CylinderGeometry(t.safetyRadius,t.safetyRadius,t.depth),i.rotateX(Math.PI/2),i.translate(-t.width/2,t.safetyHeight,0),e.push(i),i=new THREE.CylinderGeometry(t.safetyRadius,t.safetyRadius,t.depth),i.rotateX(Math.PI/2),i.translate(t.width/2,t.safetyHeight,0),e.push(i),this.geometry=THREE.BufferGeometryUtils.mergeBufferGeometries(e)}}),AFRAME.registerComponent("squat-rack",{schema:{width:{default:1},depth:{default:1},frontHeight:{default:2.2},rearHeight:{default:1.8},frameWidth:{default:.08},hookRadiusSmall:{default:.02},hookRadiusLarge:{default:.04},hookDepth:{default:.08},hookHeight:{default:1.4},safetyHeight:{default:.65},safetyRadius:{default:.02}},init(){this.el.setAttribute("geometry",{primitive:"squatRack",width:this.data.width,depth:this.data.depth,frontHeight:this.data.frontHeight,rearHeight:this.data.rearHeight,frameWidth:this.data.frameWidth,hookRadiusSmall:this.data.hookRadiusSmall,hookRadiusLarge:this.data.hookRadiusLarge,hookDepth:this.data.hookDepth,hookHeight:this.data.hookHeight,safetyHeight:this.data.safetyHeight,safetyRadius:this.data.safetyRadius}),this.el.setAttribute("material",{color:"#333"})}})},47:()=>{AFRAME.registerComponent("ui-manager",{init(){this.state={calibrated:!1,inRack:!1},this.calibrationComplete=this.calibrationComplete.bind(this),this.enteredRack=this.enteredRack.bind(this),this.exitedRack=this.exitedRack.bind(this),this.el.addEventListener("calibration-complete",this.calibrationComplete),this.el.addEventListener("entered-rack",this.enteredRack),this.el.addEventListener("exited-rack",this.exitedRack),this.calibrationUI=document.getElementById("calibration-ui"),this.insideRackUI=document.getElementById("inside-rack-ui"),this.outsideRackUI=document.getElementById("outside-rack-ui"),this.updateUIs()},calibrationComplete(){this.state.calibrated=!0,this.updateUIs()},enteredRack(){this.state.inRack=!0,this.updateUIs()},exitedRack(){this.state.inRack=!1,this.updateUIs()},updateUIs(){updateVisibility=(t,e)=>{t&&t.object3D&&(t.object3D.visible=e)},this.state.calibrated?this.state.inRack?(updateVisibility(this.calibrationUI,!1),updateVisibility(this.insideRackUI,!0),updateVisibility(this.outsideRackUI,!1)):(updateVisibility(this.calibrationUI,!1),updateVisibility(this.insideRackUI,!1),updateVisibility(this.outsideRackUI,!0)):(updateVisibility(this.calibrationUI,!0),updateVisibility(this.insideRackUI,!1),updateVisibility(this.outsideRackUI,!1))}})},611:()=>{AFRAME.registerComponent("ui-updater",{init(){this.reachedHooks=this.reachedHooks.bind(this),this.leftHooks=this.leftHooks.bind(this),this.shoulderedBar=this.shoulderedBar.bind(this),this.returnedBar=this.returnedBar.bind(this),this.hitTop=this.hitTop.bind(this),this.loweredFromTop=this.loweredFromTop.bind(this),this.hitTargetDepth=this.hitTargetDepth.bind(this),this.upwardsFromTargetDepth=this.upwardsFromTargetDepth.bind(this),this.belowSafetyPins=this.belowSafetyPins.bind(this),this.bailedOut=this.bailedOut.bind(this),this.el.addEventListener("reached-hooks",this.reachedHooks),this.el.addEventListener("left-hooks",this.leftHooks),this.el.addEventListener("shouldered-bar",this.shoulderedBar),this.el.addEventListener("returned-bar",this.returnedBar),this.el.addEventListener("hit-top",this.hitTop),this.el.addEventListener("lowered-from-top",this.loweredFromTop),this.el.addEventListener("hit-target-depth",this.hitTargetDepth),this.el.addEventListener("upwards-from-target-depth",this.upwardsFromTargetDepth),this.el.addEventListener("below-safety-pins",this.belowSafetyPins),this.el.addEventListener("bailed-out",this.bailedOut),this.state={repPhase:"none",repNumber:0,repsToGo:5},this.insideRackUI=document.querySelector("#inside-rack-ui"),this.outsideRackUI=document.querySelector("#outside-rack-ui"),this.repData={repNumber:0,completed:!1,restPrior:0,timeDown:0,depth:0,timeUp:0,turnSpeed:0,deviationLR:0,deviationFB:0}},remove(){this.el.removeEventListener("reached-hooks",this.reachedHooks),this.el.removeEventListener("left-hooks",this.leftHooks),this.el.removeEventListener("shouldered-bar",this.shoulderedBar),this.el.removeEventListener("returned-bar",this.returnedBar),this.el.removeEventListener("hit-top",this.hitTop),this.el.removeEventListener("lowered-from-top",this.loweredFromTop),this.el.removeEventListener("hit-target-depth",this.hitTargetDepth),this.el.removeEventListener("upwards-from-target-depth",this.upwardsFromTargetDepth),this.el.removeEventListener("below-safety-pins",this.belowSafetyPins),this.el.removeEventListener("bailed-out",this.bailedOut)},setTargetReps(t){this.state.repsToGo=t,this.insideRackUI.setAttribute("inside-rack-ui",{repsToGo:this.state.repsToGo})},repCompleted(t){this.repData.completed=t,this.repData.repNumber=this.state.repNumber,this.el.emit("rep-report",this.repData),this.state.repsToGo--,this.state.repNumber++,this.insideRackUI.setAttribute("inside-rack-ui",{repsToGo:this.state.repsToGo})},reachedHooks(){this.setMessage("Take weight of bar")},leftHooks(){},shoulderedBar(){this.setMessage("Step Back")},returnedBar(){this.setMessage("Finished!")},setMessage(t){this.insideRackUI.setAttribute("inside-rack-ui",{message:t})},hitTop(){switch(this.state.repPhase){case"none":this.state.repPhase="ready",this.setMessage("Ready!"),this.playPrompt("#sound-here-we-go");break;case"down":this.state.repPhase="rest",this.setMessage("Incomplete Rep"),this.playPrompt("#sound-not-quite");break;case"up":this.state.repPhase="rest",this.setMessage("Rep Complete"),this.repCompleted(!0),1===this.state.repsToGo?this.playPrompt("#sound-last-one"):this.playPrompt("#sound-nice");break;default:console.error("Hit Top in unexpected state: ",this.state.repPhase)}},loweredFromTop(){switch(this.state.repPhase){case"none":this.setMessage("Stand Taller before beginning reps");break;case"ready":case"rest":this.state.repPhase="down",this.setMessage("Going down...");break;case"up":this.setMessage("Stand at full height to complete last Rep!");break;default:console.error("Lowered From Top in unexpected state: ",this.state.repPhase)}},hitTargetDepth(){switch(this.state.repPhase){case"none":this.setMessage("Stand at full height before beginning reps");break;case"down":this.setMessage("Hit Depth!"),this.playSFX("#sfx-hit-depth"),this.state.repPhase="up";break;case"up":this.setMessage("Push up to complete this rep!");break;default:console.error("Lowered From Top in unexpected state: ",this.state.repPhase)}},upwardsFromTargetDepth(){"up"===this.state.repPhase||console.error("Lowered From Top in unexpected state: ",this.state.repPhase)},belowSafetyPins(){this.setMessage("Failed set.  Step out of rack and remove weight plates from bar.")},bailedOut(){this.repCompleted(!1),this.setMessage("Failed set.  Step out of rack and remove weight plates from bar.")},playPrompt(t){if(!this.el.sceneEl.components["ui-manager"].state.calibrated)return;const e=document.getElementById("sound-origin");e.removeAttribute("sound"),e.setAttribute("sound",{src:t,autoplay:!0})},playSFX(t){if(!this.el.sceneEl.components["ui-manager"].state.calibrated)return;const e=document.getElementById("sfx-origin");e.setAttribute("sound",{src:"",autoplay:!1}),e.setAttribute("sound",{src:t,autoplay:!0})}})},117:()=>{AFRAME.registerComponent("vertical-controls",{init(){this.verticalVelocity=0,this.verticalAcceleration=0,this.keyDown=this.keyDown.bind(this),this.keyUp=this.keyUp.bind(this),window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp)},keyDown(t){"o"===t.key&&(this.verticalAcceleration+=2),"k"===t.key&&(this.verticalAcceleration=-2)},keyUp(t){"o"!==t.key&&"k"!==t.key||(this.verticalVelocity=0,this.verticalAcceleration=0)},tick(t,e){velDelta=e*this.verticalAcceleration/1e3,this.verticalVelocity+=velDelta,this.verticalVelocity>1&&(this.verticalVelocity=1),this.verticalVelocity<-1&&(this.verticalVelocity=-1),yDelta=e*this.verticalVelocity/1e3,this.el.object3D.position.y+=yDelta}})}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}return i(610),i(693),i(297),i(611),i(211),i(117),i(880),i(47),i(12),{}})()));
//# sourceMappingURL=squatmaster.min.js.map